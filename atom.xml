<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Sanonz</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://sanonz.github.io/"/>
  <updated>2018-03-13T07:04:53.000Z</updated>
  <id>https://sanonz.github.io/</id>
  
  <author>
    <name>Sanonz</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æµè§ˆå™¨ HTTP å¹¶å‘è¯·æ±‚è§„åˆ™æ¢è®¨</title>
    <link href="https://sanonz.github.io/2018/http-max-persistent-connections-per-server/"/>
    <id>https://sanonz.github.io/2018/http-max-persistent-connections-per-server/</id>
    <published>2018-03-13T02:34:36.000Z</published>
    <updated>2018-03-13T07:04:53.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å¹¶å‘è¯·æ±‚ä»‹ç»"><a href="#å¹¶å‘è¯·æ±‚ä»‹ç»" class="headerlink" title="å¹¶å‘è¯·æ±‚ä»‹ç»"></a>å¹¶å‘è¯·æ±‚ä»‹ç»</h3><p>ç”±äºç«¯å£æ•°é‡å’Œçº¿ç¨‹åˆ‡æ¢å¼€é”€çš„è€ƒè™‘ï¼Œæµè§ˆå™¨ä¸èƒ½æ— é™é‡çš„å¹¶å‘è¯·æ±‚ï¼Œå†è€…å°†æ‰€æœ‰è¯·æ±‚ä¸€èµ·å‘ç»™æœåŠ¡å™¨ï¼Œä¹Ÿå¾ˆå¯èƒ½ä¼šå¼•å‘æœåŠ¡å™¨çš„å¹¶å‘é˜ˆå€¼æ§åˆ¶è€Œè¢« BANï¼Œè€Œå¦å¤–ä¸€ä¸ªæ§åˆ¶çš„åŸå› æ˜¯ keep alive æŠ€æœ¯çš„å­˜åœ¨ä½¿å¾—æµè§ˆå™¨å¤ç”¨ç°æœ‰è¿æ¥å’ŒæœåŠ¡å™¨é€šä¿¡æ¯”åˆ›å»ºæ–°è¿æ¥çš„æ€§èƒ½è¦æ›´å¥½ä¸€äº›ï¼Œå‡ºäºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å› ç´ çš„ç»¼åˆè€ƒè™‘ï¼Œå› æ­¤è¡ç”Ÿå‡ºæ¥äº†å¹¶å‘é™åˆ¶ã€‚</p><p>ä»¥ä¸‹ä¸ºå„å¤§æµè§ˆå™¨å¹¶å‘è¯·æ±‚é™åˆ¶çš„æ•°é‡ï¼ˆåªåœ¨åŒä¸€ä¸åŸŸåä¸‹æœ‰æ•ˆï¼‰</p><table><thead><tr><th>æµè§ˆå™¨</th><th>HTTP 1.1</th><th>HTTP 1.0</th></tr></thead><tbody><tr><td>IE 6, 7</td><td>2</td><td>4</td></tr><tr><td>IE 8, 9</td><td>6</td><td>6</td></tr><tr><td>Firefox 13</td><td>6</td><td>6</td></tr><tr><td>Chrome 20</td><td>6</td><td>?</td></tr><tr><td>Safari 5.1.7</td><td>6</td><td>?</td></tr><tr><td>Opera 11.64</td><td>8</td><td>?</td></tr></tbody></table><a id="more"></a><h3 id="å¹¶å‘è¯·æ±‚æµ‹è¯•"><a href="#å¹¶å‘è¯·æ±‚æµ‹è¯•" class="headerlink" title="å¹¶å‘è¯·æ±‚æµ‹è¯•"></a>å¹¶å‘è¯·æ±‚æµ‹è¯•</h3><p>ä»¥ä¸Šæ•°æ®æ¥æºäºç½‘ç»œï¼Œä»¥ä¸‹é’ˆå¯¹ä¸ <code>Chrome 65</code> å’Œ <code>Firefox 58</code> åˆ†åˆ«è¿›è¡Œäº†æµ‹è¯•ï¼Œæ€è·¯æ˜¯é¦–å…ˆå†™ä¸€ä¸ªå¾ªç¯ 12 æ¬¡çš„è¯·æ±‚ï¼Œæ‰“å¼€æ§åˆ¶å°çš„ Network ç‰ˆé¢ï¼Œä½¿ç”¨å½•å±è½¯ä»¶è¿›è¡Œå½•å–ï¼Œç„¶åæ…¢æ”¾å¸§æŸ¥çœ‹è¯·æ±‚çš„çŠ¶æ€ï¼Œå…¶å®ä¸ç”¨å½•å±ç›´æ¥çœ‹ä¹Ÿèƒ½çœ‹å‡ºæ•ˆæœï¼Œçœ¼ç›è¦ç›¯ç´§ä¸€ç‚¹ã€‚</p><p>æ–°å»ºä¸€ä¸ªæµ‹è¯•ç½‘é¡µ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="keyword">const</span> startTime = <span class="built_in">Date</span>.now();</span></div><div class="line"><span class="javascript">    <span class="keyword">const</span> q = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">12</span>).fill(<span class="number">0</span>).map(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span></div><div class="line"><span class="javascript">      <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span></div><div class="line"><span class="javascript">        <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">        xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></div><div class="line"><span class="javascript">          <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span></div><div class="line"><span class="undefined">            r();</span></div><div class="line"><span class="undefined">          &#125;</span></div><div class="line"><span class="undefined">        &#125;;</span></div><div class="line"><span class="javascript">        xhr.open(<span class="string">'GET'</span>, <span class="string">'https://hacker-news.firebaseio.com/v0/topstories.json'</span>, <span class="literal">true</span>);</span></div><div class="line"><span class="undefined">        xhr.send();</span></div><div class="line"><span class="undefined">      &#125;);</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">      <span class="keyword">return</span> p;</span></div><div class="line"><span class="undefined">    &#125;);</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="built_in">Promise</span>.all(q).then(<span class="function"><span class="params">rs</span> =&gt;</span> &#123;</span></div><div class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="built_in">Date</span>.now() - startTime);</span></div><div class="line"><span class="undefined">    &#125;);</span></div><div class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸ºå½•å– Chrome Network æ§åˆ¶ç‰ˆé¢çš„æ…¢æ”¾å¸§ï¼Œå¯ä»¥çœ‹å‡ºåœ¨ 12 ä¸ªè¯·æ±‚ä¸­ï¼Œå…ˆå‘å‡ºå‰ 6 ä¸ªè¯·æ±‚ï¼Œå 6 ä¸ªå¤„äº <code>pending</code> çŠ¶æ€ï¼Œå½“å‰ 6 ä¸ªè¯·æ±‚å®Œæˆæ—¶ä½™ä¸‹çš„è¯·æ±‚æ‰å‘å‡ºã€‚</p><img src="/2018/http-max-persistent-connections-per-server/chrome-max-persistent-connections-per-server-6.gif" width="515" height="281"><p>ä»¥ä¸‹ä¸ºä½¿ç”¨ Firefox çš„æµ‹è¯•ç»“æœï¼Œå¯è§å’Œ Chrome çš„ä¸€æ ·</p><img src="/2018/http-max-persistent-connections-per-server/firefox-max-persistent-connections-per-server-6.gif" width="1152" height="379"><h3 id="ä¿®æ”¹å¹¶å‘è¯·æ±‚æ•°é‡"><a href="#ä¿®æ”¹å¹¶å‘è¯·æ±‚æ•°é‡" class="headerlink" title="ä¿®æ”¹å¹¶å‘è¯·æ±‚æ•°é‡"></a>ä¿®æ”¹å¹¶å‘è¯·æ±‚æ•°é‡</h3><p>æµè§ˆå™¨è¿™æ ·åšå‡ºå‘ç‚¹æ˜¯å¥½çš„ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬æƒ³è¦ä¸ªæ€§åŒ–å®šåˆ¶ï¼ˆæ¯”å¦‚åšä¸ªæ’ä»¶å¼€ä¸ªæŒ‚ä¹‹ç±»çš„ğŸ˜ˆï¼‰å°±æ²¡é‚£ä¹ˆæ–¹ä¾¿äº†ï¼Œé‚£èƒ½ä¸èƒ½ä¿®æ”¹é™åˆ¶ä¸Šé™å‘¢ï¼Ÿ</p><ol><li>Chrome çš„å¹¶å‘è¯·æ±‚æ•°é‡æ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œå› ä¸ºå·²ç»å›ºå®šå†™åˆ°æºç ä¸­äº†ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ï¼š<a href="https://chromium.googlesource.com/chromium/src/+/65.0.3325.162/net/socket/client_socket_pool_manager.cc#44" target="_blank" rel="noopener">https://chromium.googlesource.com/chromium/src/+/65.0.3325.162/net/socket/client_socket_pool_manager.cc#44</a>ï¼Œå¯ä»¥ä½¿ç”¨ Firefoxï¼Œå¦‚æœéè¦ä¿®æ”¹å¯ä»¥å°è¯•ä¿®æ”¹æºç ç„¶åè‡ªè¡Œç¼–è¯‘ã€‚</li><li>Firefox æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œæƒ³è¦ä¿®æ”¹é¦–å…ˆåœ¨åœ°å€æ è¾“å…¥ <code>about:config</code>ï¼Œæœç´¢ <code>http.max</code> å…³é”®å­—ï¼Œ<code>network.http.max-connections</code> ä¸ºå…¨å±€ HTTP åŒæ—¶æœ€å¤§çš„è¿æ¥æ•°é‡ï¼Œé»˜è®¤ä¸º 900ï¼›<code>network.http.max-persistent-connections-per-server</code> ä¸ºå•ä¸ªåŸŸåæœ€å¤§é“¾æ¥æ•°é‡ï¼Œé»˜è®¤ä¸º 6ï¼Œå‡»åŒæ­¤åˆ—å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚</li></ol><p>è¿™é‡Œæˆ‘ä»¬æŠŠ <code>network.http.max-persistent-connections-per-server</code> ä» 6 ä¿®æ”¹åˆ° 8 ç„¶åå†æ¬¡è¿›è¡Œæµ‹è¯•</p><img src="/2018/http-max-persistent-connections-per-server/firefox-max-persistent-connections-per-server-8.gif" width="1152" height="379"><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚ <code>topstories.json</code> ç¬¬ä¸€æ¬¡è¯·æ±‚å‘å‡ºçš„ 8 ä¸ªï¼Œå‰©ä½™ 4 ä¸ªå¤„äºç­‰å¾…çŠ¶æ€ï¼Œå½“ 8 ä¸ªè¯·æ±‚å®Œæˆæ—¶ä½™ä¸‹ 4 ä¸ªæ‰å‘å‡ºï¼Œè¿™é‡Œæµ‹è¯•çš„æ—¶å€™ç½‘ç»œæ¯”è¾ƒç¨³å®šï¼Œå‰ 8 ä¸ªå‡ ä¹åŒæ—¶å‘å‡ºå’Œè¿”å›ï¼Œæ‰€ä»¥å 4 ä¸ªå‡ ä¹ä¸€å—å‘å‡ºã€‚</p><p>æˆ‘ä»¬åˆ†åˆ«è¿›è¡Œä¸¤è½®æµ‹è¯•ï¼Œåˆ†åˆ«åœ¨çœ‹ä¸‹æ§åˆ¶å°æ‰“å°çš„ 500 ä¸ªè¯·æ±‚æ€»å…±æ¶ˆè€—çš„æ—¶é—´ï¼ˆå•ä½msï¼‰è¿›è¡Œç»“æœå†æ¬¡ç¡®è®¤</p><table><thead><tr><th></th><th>å¹¶å‘ 6</th><th>å¹¶å‘ 12</th></tr></thead><tbody><tr><td>1</td><td>16554</td><td>8631</td></tr><tr><td>2</td><td>18037</td><td>9427</td></tr></tbody></table><h3 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h3><p>éšç€ç°åœ¨ç½‘ç«™è¶Šæ¥è¶Šä¸°å¯ŒåŒ–ï¼Œå¹¶å‘ 6 ä¸ªè¯·æ±‚å¯èƒ½å·²ç»æ»¡è¶³ä¸äº†åƒå˜ä¸‡åŒ–çš„éœ€æ±‚ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸åŒçš„åŸŸåè¿›è¡Œèµ„æºåˆ†ç¦»ï¼Œè¿™æ ·å°±å¯ä»¥ç»•è¿‡å•ä¸ªåŸŸååªèƒ½å¹¶å‘è¯·æ±‚ 6 ä¸ªèµ„æºçš„é™åˆ¶ï¼Œåœ¨åŠ ä¸Š <code>dns-prefetch</code> ç‰¹æ€§æ¥æå‡ç½‘ç«™æ‰“å¼€é€Ÿåº¦è€Œåˆä¸ä¸¢å¤±ç«™ç‚¹çš„ä¸°å¯Œæ€§ï¼Œç®€ç›´å®Œç¾ ğŸ‘ğŸ‘ğŸ‘ã€‚</p><p>ä»¥ä¸Šåªæµ‹è¯•äº† <code>Chrome 65</code> å’Œ <code>Firefox 58</code> æœ‰å…´è¶£çš„å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æµ‹è¯•å…¶ä»–æµè§ˆå™¨ï¼Œæµ‹è¯•å®Œæ¬¢è¿å›æ¥äº¤æµã€‚</p><p>è‡³æ­¤ç»“æŸï¼Œæ„Ÿè°¢é˜…è¯»ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å¹¶å‘è¯·æ±‚ä»‹ç»&quot;&gt;&lt;a href=&quot;#å¹¶å‘è¯·æ±‚ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;å¹¶å‘è¯·æ±‚ä»‹ç»&quot;&gt;&lt;/a&gt;å¹¶å‘è¯·æ±‚ä»‹ç»&lt;/h3&gt;&lt;p&gt;ç”±äºç«¯å£æ•°é‡å’Œçº¿ç¨‹åˆ‡æ¢å¼€é”€çš„è€ƒè™‘ï¼Œæµè§ˆå™¨ä¸èƒ½æ— é™é‡çš„å¹¶å‘è¯·æ±‚ï¼Œå†è€…å°†æ‰€æœ‰è¯·æ±‚ä¸€èµ·å‘ç»™æœåŠ¡å™¨ï¼Œä¹Ÿå¾ˆå¯èƒ½ä¼šå¼•å‘æœåŠ¡å™¨çš„å¹¶å‘é˜ˆå€¼æ§åˆ¶è€Œè¢« BANï¼Œè€Œå¦å¤–ä¸€ä¸ªæ§åˆ¶çš„åŸå› æ˜¯ keep alive æŠ€æœ¯çš„å­˜åœ¨ä½¿å¾—æµè§ˆå™¨å¤ç”¨ç°æœ‰è¿æ¥å’ŒæœåŠ¡å™¨é€šä¿¡æ¯”åˆ›å»ºæ–°è¿æ¥çš„æ€§èƒ½è¦æ›´å¥½ä¸€äº›ï¼Œå‡ºäºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å› ç´ çš„ç»¼åˆè€ƒè™‘ï¼Œå› æ­¤è¡ç”Ÿå‡ºæ¥äº†å¹¶å‘é™åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;ä»¥ä¸‹ä¸ºå„å¤§æµè§ˆå™¨å¹¶å‘è¯·æ±‚é™åˆ¶çš„æ•°é‡ï¼ˆåªåœ¨åŒä¸€ä¸åŸŸåä¸‹æœ‰æ•ˆï¼‰&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æµè§ˆå™¨&lt;/th&gt;&lt;th&gt;HTTP 1.1&lt;/th&gt;&lt;th&gt;HTTP 1.0&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;IE 6, 7&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;IE 8, 9&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Firefox 13&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Chrome 20&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;?&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Safari 5.1.7&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;?&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Opera 11.64&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;?&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
      <category term="front-end" scheme="https://sanonz.github.io/categories/front-end/"/>
    
    
      <category term="JavaScript" scheme="https://sanonz.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript Event Loopã€Micro Taskã€Macro Task</title>
    <link href="https://sanonz.github.io/2018/javascript-event-loop-microtasks-macrotasks/"/>
    <id>https://sanonz.github.io/2018/javascript-event-loop-microtasks-macrotasks/</id>
    <published>2018-02-24T08:23:50.000Z</published>
    <updated>2018-02-24T11:13:09.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h3><p>Event Loopï¼šäº‹ä»¶å¾ªç¯ã€Micro Taskï¼šå¾®ä»»åŠ¡ã€Macro Taskï¼šå®ä»»åŠ¡</p><p>æˆ‘ä»¬çŸ¥é“ JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œä¸€å¿ƒä¸èƒ½äºŒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªèƒ½æŠŠä¸€ä»¶äº‹å¹²å®Œæ‰èƒ½å»å¹²å¦ä¸€ä»¶äº‹ï¼Œä½†å‰ç«¯çš„ä¸€äº›ä»»åŠ¡æ˜¯éå¸¸è€—æ—¶çš„ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œå®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬ï¼Œå¦‚æœè®©å®ƒä»¬å’Œåˆ«çš„ä»»åŠ¡ä¸€æ ·ï¼Œéƒ½è€è€å®å®çš„æ’é˜Ÿç­‰å¾…æ‰§è¡Œçš„è¯ï¼Œæ‰§è¡Œæ•ˆç‡ä¼šéå¸¸çš„ä½ï¼Œç”šè‡³å¯¼è‡´é¡µé¢çš„å‡æ­»ã€‚æ‰€ä»¥ä¸ºäº†ä¿è¯ä½¿ç”¨æµç•…ï¼Œæµè§ˆå™¨é‡‡ç”¨äº† Event Loop äº‹ä»¶å¾ªç¯ç³»ç»Ÿæ¥ç®¡ç†ï¼ŒæŠŠé‚£äº›è€—æ—¶çš„ä»»åŠ¡æ”¾å…¥ task queues æ ˆä¸­ï¼Œç­‰ä¸»ç¨‹åºæ‰§è¡Œå®Œå†æ‰§è¡Œ task queues ä¸­çš„ä»»åŠ¡ï¼Œé€šå¸¸ä½¿ç”¨å›è°ƒå‡½æ•°ç›‘å¬ task queues ä¸­çš„ä»»åŠ¡çŠ¶æ€ã€‚</p><p>åœ¨å…¶å®ƒè¯­è¨€ä¸­å¯ä»¥è¿Ÿå»¶æ‰§è¡Œï¼Œæ¯”å¦‚ C è¯­è¨€çš„ <code>sleep(3)</code> å¯ä»¥è¿Ÿå»¶ 3 ç§’æ‰§è¡Œåè¾¹çš„é€»è¾‘ï¼Œä½†æ˜¯åœ¨ JavaScript ä¸­æ˜¯æ²¡æœ‰è¿™æ ·çš„æ“ä½œï¼ˆé™¤äº† <code>alert</code>ã€<code>confrim</code>ã€<code>prompt</code> å’Œå¼‚æ­¥ <code>xhr</code>ï¼Œå®˜æ–¹è¯´è¿™äº›æ˜¯å†å²é—ç•™çš„é”™è¯¯è®¾è®¡ğŸ˜‚ï¼‰ï¼Œåªèƒ½ä½¿ç”¨å¼‚æ­¥æ–¹å¼å»æ¨¡æ‹Ÿï¼Œæ¨¡æ‹Ÿçš„å®é™…ä¹Ÿä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ <code>sleep</code> æ•ˆæœã€‚</p><a id="more"></a><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><p>åœ¨è®¨è®º Micro Taskã€Macro Task ä¹‹å‰æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåˆ†æä»¥ä¸‹ä»£ç å¹¶æ€è€ƒ log æ‰“çš„å°é¡ºåº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>);</div><div class="line"></div><div class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout 1'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.resolve()</div><div class="line">.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'promise 1'</span>);</div><div class="line">&#125;)</div><div class="line">.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'promise 2'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>);</div></pre></td></tr></table></figure><p>è¿è¡Œç»“æœä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">script start</div><div class="line">script end</div><div class="line">promise 1</div><div class="line">promise 2</div><div class="line">setTimeout 1</div></pre></td></tr></table></figure><p>æœ‰äººå¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯æŒ‰é¡ºåºè¾“å‡ºï¼Ÿåˆæˆ–è€…æ˜¯è¿™æ ·<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">script start</div><div class="line">script end</div><div class="line">setTimeout 1</div><div class="line">promise 1</div><div class="line">promise 2</div></pre></td></tr></table></figure><p></p><h3 id="Micro-Taskã€Macro-Task"><a href="#Micro-Taskã€Macro-Task" class="headerlink" title="Micro Taskã€Macro Task"></a>Micro Taskã€Macro Task</h3><p>æƒ³è¦ææ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¦äº†è§£ Event Loop ä¸‹çš„ <code>Micro Task</code> å’Œ <code>Macro Task</code>ï¼Œåœ¨è¿è¡Œä¸»ç¨‹åºæ—¶ä¼šæŠŠå¼‚æ­¥é€»è¾‘æ ¹æ®æƒ…å†µæ¨åˆ° <code>Micro Task</code> æˆ–è€… <code>Macro Task</code> æ ˆä¸­ï¼Œå…·ä½“è§„åˆ™å¦‚ä¸‹</p><p>ä»¥ä¸‹æƒ…å†µä¼šæ¨åˆ° <strong>Micro Task</strong> æ ˆä¸­</p><ul><li>process.nextTick</li><li>Promise</li><li>Object.observe</li><li>MutationObserver</li></ul><p>ä»¥ä¸‹æƒ…å†µä¼šæ¨åˆ° <strong>Macro Task</strong> æ ˆä¸­</p><ul><li>setTimeout</li><li>setInterval</li><li>setImmediate</li><li>I/O</li><li>UI render</li></ul><p>ç„¶åå†æ¥çœ‹å®ä¾‹ä»£ç çš„å®é™…æ‰§è¡Œé€»è¾‘</p><ol><li>æ‰§è¡Œ <code>console.log(&#39;script start&#39;)</code> ç›´æ¥è¾“å‡º</li><li>æ‰§è¡Œ <code>setTimeout</code> æŠŠå›è°ƒå‡½æ•°æ”¾å…¥ <strong>Macro Task</strong> æ ˆä¸­</li><li>æ‰§è¡Œ <code>Promise</code> æŠŠä¸¤ä¸ª then çš„å›è°ƒå‡½æ•°æ”¾å…¥ <strong>Micro Task</strong> æ ˆä¸­</li><li>æ‰§è¡Œ <code>console.log(&#39;script end&#39;)</code> ç›´æ¥è¾“å‡º</li><li>æ‰§è¡Œ <strong>Micro Task</strong> ä¸­æ‰€æœ‰ä»»åŠ¡<ol><li>æ‰§è¡Œ <code>console.log(&#39;promise 1&#39;)</code> ç›´æ¥è¾“å‡º</li><li>æ‰§è¡Œ <code>console.log(&#39;promise 2&#39;)</code> ç›´æ¥è¾“å‡º</li></ol></li><li>æ‰§è¡Œ <strong>Macro Task</strong> ä¸­æ‰€æœ‰ä»»åŠ¡<ol><li>æ‰§è¡Œ <code>console.log(&#39;setTimeout 1&#39;)</code> ç›´æ¥è¾“å‡º</li></ol></li></ol><h3 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h3><p>äº‹ä»¶å¾ªç¯çš„é¡ºåºï¼Œå†³å®šäº† JavaScript ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚å®ƒä» script (æ•´ä½“ä»£ç ) å¼€å§‹ç¬¬ä¸€æ¬¡å¾ªç¯ã€‚ä¹‹åå…¨å±€ä¸Šä¸‹æ–‡è¿›å…¥å‡½æ•°è°ƒç”¨æ ˆã€‚ç›´åˆ°è°ƒç”¨æ ˆæ¸…ç©º(åªå‰©å…¨å±€)ï¼Œç„¶åæ‰§è¡Œæ‰€æœ‰çš„ Micro Taskã€‚å½“æ‰€æœ‰å¯æ‰§è¡Œçš„ Micro Task æ‰§è¡Œå®Œæ¯•ä¹‹åã€‚å¾ªç¯å†æ¬¡ä» Macro Task å¼€å§‹ï¼Œæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ï¼Œç„¶åå†æ‰§è¡Œæ‰€æœ‰çš„ Micro Taskï¼Œåœ¨æ‰§è¡Œ Micro Taskã€Macro Task çš„æ—¶å€™åŒæ ·éµå¾ª Event Loop åŸåˆ™ï¼Œå°±è¿™æ ·ä¸€ç›´å¾ªç¯ä¸‹å»ã€‚</p><p>è‡³æ­¤ç»“æŸï¼Œæ„Ÿè°¢é˜…è¯»ã€‚<br><br></p><p>å‚è€ƒç«™ç‚¹</p><ul><li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" target="_blank" rel="noopener">https://html.spec.whatwg.org/multipage/webappapis.html#event-loop</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Event-Loop&quot;&gt;&lt;a href=&quot;#Event-Loop&quot; class=&quot;headerlink&quot; title=&quot;Event Loop&quot;&gt;&lt;/a&gt;Event Loop&lt;/h3&gt;&lt;p&gt;Event Loopï¼šäº‹ä»¶å¾ªç¯ã€Micro Taskï¼šå¾®ä»»åŠ¡ã€Macro Taskï¼šå®ä»»åŠ¡&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“ JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œä¸€å¿ƒä¸èƒ½äºŒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªèƒ½æŠŠä¸€ä»¶äº‹å¹²å®Œæ‰èƒ½å»å¹²å¦ä¸€ä»¶äº‹ï¼Œä½†å‰ç«¯çš„ä¸€äº›ä»»åŠ¡æ˜¯éå¸¸è€—æ—¶çš„ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œå®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬ï¼Œå¦‚æœè®©å®ƒä»¬å’Œåˆ«çš„ä»»åŠ¡ä¸€æ ·ï¼Œéƒ½è€è€å®å®çš„æ’é˜Ÿç­‰å¾…æ‰§è¡Œçš„è¯ï¼Œæ‰§è¡Œæ•ˆç‡ä¼šéå¸¸çš„ä½ï¼Œç”šè‡³å¯¼è‡´é¡µé¢çš„å‡æ­»ã€‚æ‰€ä»¥ä¸ºäº†ä¿è¯ä½¿ç”¨æµç•…ï¼Œæµè§ˆå™¨é‡‡ç”¨äº† Event Loop äº‹ä»¶å¾ªç¯ç³»ç»Ÿæ¥ç®¡ç†ï¼ŒæŠŠé‚£äº›è€—æ—¶çš„ä»»åŠ¡æ”¾å…¥ task queues æ ˆä¸­ï¼Œç­‰ä¸»ç¨‹åºæ‰§è¡Œå®Œå†æ‰§è¡Œ task queues ä¸­çš„ä»»åŠ¡ï¼Œé€šå¸¸ä½¿ç”¨å›è°ƒå‡½æ•°ç›‘å¬ task queues ä¸­çš„ä»»åŠ¡çŠ¶æ€ã€‚&lt;/p&gt;&lt;p&gt;åœ¨å…¶å®ƒè¯­è¨€ä¸­å¯ä»¥è¿Ÿå»¶æ‰§è¡Œï¼Œæ¯”å¦‚ C è¯­è¨€çš„ &lt;code&gt;sleep(3)&lt;/code&gt; å¯ä»¥è¿Ÿå»¶ 3 ç§’æ‰§è¡Œåè¾¹çš„é€»è¾‘ï¼Œä½†æ˜¯åœ¨ JavaScript ä¸­æ˜¯æ²¡æœ‰è¿™æ ·çš„æ“ä½œï¼ˆé™¤äº† &lt;code&gt;alert&lt;/code&gt;ã€&lt;code&gt;confrim&lt;/code&gt;ã€&lt;code&gt;prompt&lt;/code&gt; å’Œå¼‚æ­¥ &lt;code&gt;xhr&lt;/code&gt;ï¼Œå®˜æ–¹è¯´è¿™äº›æ˜¯å†å²é—ç•™çš„é”™è¯¯è®¾è®¡ğŸ˜‚ï¼‰ï¼Œåªèƒ½ä½¿ç”¨å¼‚æ­¥æ–¹å¼å»æ¨¡æ‹Ÿï¼Œæ¨¡æ‹Ÿçš„å®é™…ä¹Ÿä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ &lt;code&gt;sleep&lt;/code&gt; æ•ˆæœã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="front-end" scheme="https://sanonz.github.io/categories/front-end/"/>
    
    
      <category term="JavaScript" scheme="https://sanonz.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>WebAssembly ä»å…¥é—¨åˆ°åƒé¸¡</title>
    <link href="https://sanonz.github.io/2018/webassembly-tutorial/"/>
    <id>https://sanonz.github.io/2018/webassembly-tutorial/</id>
    <published>2018-01-12T06:58:00.000Z</published>
    <updated>2018-01-17T11:59:17.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="WebAssembly-ä»‹ç»"><a href="#WebAssembly-ä»‹ç»" class="headerlink" title="WebAssembly ä»‹ç»"></a>WebAssembly ä»‹ç»</h3><p>æˆ‘ä»¬çŸ¥é“ JavaScript æ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œå…·æœ‰åŠ¨æ€ç±»å‹å’Œçµæ´»çš„è¡¨è¾¾åŠ›ï¼Œæˆ‘ä»¬çŸ¥é“è„šæœ¬è¯­è¨€é€šå¸¸è¦è§£é‡Šè¿è¡Œï¼Œè¿™ä¹Ÿå°†è¦æ¶ˆè€—ä¸€äº›æ€§èƒ½å¼€é”€ï¼Œäºæ˜¯ Google åœ¨ 2009 å¹´åœ¨ V8 ä¸­å¼•å…¥äº† JIT(Just in time compiling) æŠ€æœ¯ï¼ŒæŠŠ JavaScript è¿è¡Œæ—¶çš„æ€§èƒ½æ¨åˆ°äº†é¡¶å³°ï¼ŒåŒå¹´åˆ©ç”¨ V8 å¼•æ“è¯ç”Ÿäº† Node.jsï¼Œæ‰“å¼€äº†ä½¿ç”¨ JavaScript å†™åç«¯åº”ç”¨çš„å¤§é—¨ã€‚å¯¹äºç›®å‰å†™ç½‘ç»œåº”ç”¨è€Œè¨€ JavaScript å·²ç»è¶³å¤Ÿç”¨äº†ï¼ŒåŠ ä¸Š Google V8 å¼•æ“èƒ½å¸®æˆ‘ä»¬è§£å†³æ‰å¤§éƒ¨åˆ†é—®é¢˜ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æŠŠ JavaScript åº”ç”¨åˆ°è¯¸å¦‚ 3D æ¸¸æˆã€è™šæ‹Ÿç°å®ã€å¢å¼ºç°å®ã€è®¡ç®—æœºè§†è§‰ã€å›¾åƒ/è§†é¢‘ç¼–è¾‘ä»¥åŠå¤§é‡çš„è¦æ±‚åŸç”Ÿæ€§èƒ½çš„å…¶ä»–é¢†åŸŸçš„æ—¶å€™ï¼Œå°±é‡åˆ°äº†æ€§èƒ½é—®é¢˜ï¼Œå°¤å…¶æ˜¯ç§»åŠ¨å¹³å°è¿›ä¸€æ­¥æ”¾å¤§äº†è¿™äº›æ€§èƒ½ç“¶é¢ˆã€‚</p><p>è€Œ WebAssembly çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒæ˜¯ä¸€é—¨ä½çº§çš„ç±»æ±‡ç¼–è¯­è¨€ï¼Œå¯ä»¥è¿è¡Œåœ¨ç°ä»£ç½‘ç»œæµè§ˆå™¨ä¸­çš„æ–°å‹ä»£ç å¹¶ä¸”æä¾›æ–°çš„æ€§èƒ½ç‰¹æ€§å’Œæ•ˆæœã€‚å®ƒè®¾è®¡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†æ‰‹å†™ä»£ç ï¼Œè€Œæ˜¯ä¸ºäº†è¯¸å¦‚ Cã€C++ å’Œ Rust ç­‰ä½çº§æºè¯­è¨€æä¾›ä¸€ä¸ªé«˜æ•ˆçš„ç¼–è¯‘ç›®æ ‡ä»¥ä¾¿å®ƒä»¬èƒ½å¤Ÿåœ¨ç½‘ç»œä¸Šè¿è¡Œã€‚å¯¹äºç½‘ç»œå¹³å°è€Œè¨€ï¼Œè¿™å…·æœ‰å·¨å¤§çš„æ„ä¹‰â€”â€”è¿™ä¸ºå®¢æˆ·ç«¯ app æä¾›äº†ä¸€ç§åœ¨ç½‘ç»œå¹³å°ä»¥æ¥è¿‘æœ¬åœ°é€Ÿåº¦çš„æ–¹å¼è¿è¡Œå¤šç§è¯­è¨€ç¼–å†™ä»£ç çš„æ–¹å¼ï¼›åœ¨è¿™ä¹‹å‰ï¼Œå®¢æˆ·ç«¯ app æ˜¯ä¸å¯èƒ½åšåˆ°çš„ã€‚</p><a id="more"></a><h3 id="WebAssembly-ä½¿ç”¨"><a href="#WebAssembly-ä½¿ç”¨" class="headerlink" title="WebAssembly ä½¿ç”¨"></a>WebAssembly ä½¿ç”¨</h3><p>WebAssembly æœ‰äºŒè¿›åˆ¶ (.wasm) å’Œæ–‡æœ¬ (.wast) ä¸¤ç§æ ¼å¼ï¼Œå¹¶ä¸”ä¸¤ç§æ ¼å¼å¯ä»¥äº’äº«è½¬æ¢ï¼Œåœ¨ä¼ è¾“å’Œè¿è¡Œæ—¶ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œè€Œæ–‡æœ¬æ ¼å¼æ˜¯ä¸ºäº†é˜…è¯»å’Œå¼€å‘è°ƒè¯•æ‰€ä½¿ç”¨ã€‚</p><p>ä»¥ C ä¸ºä¾‹ï¼Œé¦–å…ˆæŠŠ C ç¨‹åºç¼–è¯‘ä¸º WebAssembly æ ¼å¼ï¼Œæœ¬åœ°ç¼–è¯‘å¯ä»¥æŸ¥çœ‹ <a href="https://developer.mozilla.org/zh-CN/docs/WebAssembly/C_to_wasm" target="_blank" rel="noopener">ç¼–è¯‘ C/C++ ä¸º WebAssembly</a> æ–‡ç« è¿›è¡Œç›¸å…³è½¯ä»¶çš„å®‰è£…ï¼Œä¸ºäº†æ–¹ä¾¿å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™æ¬¾åœ¨çº¿å·¥å…·è¿›è¡Œè½¬æ¢ <a href="https://wasdk.github.io/WasmFiddle/" target="_blank" rel="noopener">WasmFiddle</a></p><p>æˆ‘ä»¬å…ˆæ¥ä¸ªç®€å•çš„ï¼Œåœ¨ <code>main</code> ä¸­è¿”å›ä¸€ä¸ªæ•°å­—ï¼Œåœ¨ <code>add</code> æ–¹æ³•ä¸­æ±‚å’Œ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; </div><div class="line">  <span class="keyword">return</span> <span class="number">42</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> a + b;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è½¬æ¢è¿‡åçš„ .wast æ–‡æœ¬æ ¼å¼ä¸ºï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªæ–‡æœ¬çœ‹å‡ºåˆ†åˆ« export äº† <code>main</code> ä¸ <code>add</code> æ–¹æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">(module</div><div class="line"> (table 0 anyfunc)</div><div class="line"> (memory $0 1)</div><div class="line"> (export "memory" (memory $0))</div><div class="line"> (export "main" (func $main))</div><div class="line"> (export "add" (func $add))</div><div class="line"> (func $main (; 0 ;) (result i32)</div><div class="line">  (i32.const 42)</div><div class="line"> )</div><div class="line"> (func $add (; 1 ;) (param $0 i32) (param $1 i32) (result i32)</div><div class="line">  (i32.add</div><div class="line">   (get_local $1)</div><div class="line">   (get_local $0)</div><div class="line">  )</div><div class="line"> )</div><div class="line">)</div></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener">Fetch</a> è·å–æ¨¡å—å¹¶åˆå§‹åŒ–è°ƒç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">fetch(<span class="string">'module.wasm'</span>)</div><div class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.arrayBuffer())</div><div class="line">  .then(<span class="function"><span class="params">bytes</span> =&gt;</span> WebAssembly.instantiate(bytes))</div><div class="line">  .then(<span class="function"><span class="params">results</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> results.instance.exports.main); <span class="comment">// function</span></div><div class="line">    <span class="built_in">console</span>.log(results.instance.exports.main()); <span class="comment">// 42</span></div><div class="line">    <span class="built_in">console</span>.log(results.instance.exports.add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></div><div class="line">  &#125;)</div></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>results.instance.exports.main()</code> çš„å½¢å¼è¿›è¡Œè°ƒç”¨</p><p>ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener">XMLHttpRequest</a> è·å–æ¨¡å—å¹¶åˆå§‹åŒ–è°ƒç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> request = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">request.open(<span class="string">'GET'</span>, <span class="string">'module.wasm'</span>);</div><div class="line">request.responseType = <span class="string">'arraybuffer'</span>;</div><div class="line"></div><div class="line">request.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> bytes = request.response;</div><div class="line">  WebAssembly</div><div class="line">  .instantiate(bytes)</div><div class="line">  .then(<span class="function"><span class="params">results</span> =&gt;</span> &#123;</div><div class="line">    results.instance.exports.main();</div><div class="line">  &#125;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">request.send();</div></pre></td></tr></table></figure><p>ç›®å‰åªå®ç°äº† JavaScript è¯­è¨€è°ƒç”¨ C è¯­è¨€ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨ C è°ƒç”¨ JavaScript æ–¹æ³•ï¼Œå£°æ˜å¹¶åœ¨éœ€è¦çš„åœ°æ–¹è°ƒç”¨ <code>alert</code> æ–¹æ³•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">alert</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> alert(a + b);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è·å–å®ä¾‹æ—¶ä¼ å…¥ <code>importObj</code> å¯¹è±¡ï¼ŒæŠŠ <code>env</code> ç¯å¢ƒå˜é‡æ³¨å…¥è¿›æ¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> importObj = &#123;</div><div class="line">  env: &#123;</div><div class="line">    alert: <span class="built_in">window</span>.alert</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">fetch(<span class="string">'module.wasm'</span>)</div><div class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.arrayBuffer())</div><div class="line">  .then(<span class="function"><span class="params">bytes</span> =&gt;</span> WebAssembly.instantiate(bytes, importObj))</div><div class="line">  .then(<span class="function"><span class="params">results</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(results.instance.exports.add(<span class="number">1</span>, <span class="number">2</span>));</div><div class="line">  &#125;)</div></pre></td></tr></table></figure><p>è‡³æ­¤ç›¸äº’è°ƒç”¨æ¼”ç¤ºå®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥ç•…æƒ³ä¸‹ä»¥å WebAssembly æ™®åŠçš„è¯ï¼Œåˆ°æ—¶æˆ‘ä»¬ç”¨çš„ Reactã€Vueã€Angular å¯èƒ½å°±æ˜¯ç”¨ C/C++ æˆ–è€…å…¶ä»–åº•å±‚è¯­è¨€å†™çš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;WebAssembly-ä»‹ç»&quot;&gt;&lt;a href=&quot;#WebAssembly-ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;WebAssembly ä»‹ç»&quot;&gt;&lt;/a&gt;WebAssembly ä»‹ç»&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“ JavaScript æ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œå…·æœ‰åŠ¨æ€ç±»å‹å’Œçµæ´»çš„è¡¨è¾¾åŠ›ï¼Œæˆ‘ä»¬çŸ¥é“è„šæœ¬è¯­è¨€é€šå¸¸è¦è§£é‡Šè¿è¡Œï¼Œè¿™ä¹Ÿå°†è¦æ¶ˆè€—ä¸€äº›æ€§èƒ½å¼€é”€ï¼Œäºæ˜¯ Google åœ¨ 2009 å¹´åœ¨ V8 ä¸­å¼•å…¥äº† JIT(Just in time compiling) æŠ€æœ¯ï¼ŒæŠŠ JavaScript è¿è¡Œæ—¶çš„æ€§èƒ½æ¨åˆ°äº†é¡¶å³°ï¼ŒåŒå¹´åˆ©ç”¨ V8 å¼•æ“è¯ç”Ÿäº† Node.jsï¼Œæ‰“å¼€äº†ä½¿ç”¨ JavaScript å†™åç«¯åº”ç”¨çš„å¤§é—¨ã€‚å¯¹äºç›®å‰å†™ç½‘ç»œåº”ç”¨è€Œè¨€ JavaScript å·²ç»è¶³å¤Ÿç”¨äº†ï¼ŒåŠ ä¸Š Google V8 å¼•æ“èƒ½å¸®æˆ‘ä»¬è§£å†³æ‰å¤§éƒ¨åˆ†é—®é¢˜ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æŠŠ JavaScript åº”ç”¨åˆ°è¯¸å¦‚ 3D æ¸¸æˆã€è™šæ‹Ÿç°å®ã€å¢å¼ºç°å®ã€è®¡ç®—æœºè§†è§‰ã€å›¾åƒ/è§†é¢‘ç¼–è¾‘ä»¥åŠå¤§é‡çš„è¦æ±‚åŸç”Ÿæ€§èƒ½çš„å…¶ä»–é¢†åŸŸçš„æ—¶å€™ï¼Œå°±é‡åˆ°äº†æ€§èƒ½é—®é¢˜ï¼Œå°¤å…¶æ˜¯ç§»åŠ¨å¹³å°è¿›ä¸€æ­¥æ”¾å¤§äº†è¿™äº›æ€§èƒ½ç“¶é¢ˆã€‚&lt;/p&gt;&lt;p&gt;è€Œ WebAssembly çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒæ˜¯ä¸€é—¨ä½çº§çš„ç±»æ±‡ç¼–è¯­è¨€ï¼Œå¯ä»¥è¿è¡Œåœ¨ç°ä»£ç½‘ç»œæµè§ˆå™¨ä¸­çš„æ–°å‹ä»£ç å¹¶ä¸”æä¾›æ–°çš„æ€§èƒ½ç‰¹æ€§å’Œæ•ˆæœã€‚å®ƒè®¾è®¡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†æ‰‹å†™ä»£ç ï¼Œè€Œæ˜¯ä¸ºäº†è¯¸å¦‚ Cã€C++ å’Œ Rust ç­‰ä½çº§æºè¯­è¨€æä¾›ä¸€ä¸ªé«˜æ•ˆçš„ç¼–è¯‘ç›®æ ‡ä»¥ä¾¿å®ƒä»¬èƒ½å¤Ÿåœ¨ç½‘ç»œä¸Šè¿è¡Œã€‚å¯¹äºç½‘ç»œå¹³å°è€Œè¨€ï¼Œè¿™å…·æœ‰å·¨å¤§çš„æ„ä¹‰â€”â€”è¿™ä¸ºå®¢æˆ·ç«¯ app æä¾›äº†ä¸€ç§åœ¨ç½‘ç»œå¹³å°ä»¥æ¥è¿‘æœ¬åœ°é€Ÿåº¦çš„æ–¹å¼è¿è¡Œå¤šç§è¯­è¨€ç¼–å†™ä»£ç çš„æ–¹å¼ï¼›åœ¨è¿™ä¹‹å‰ï¼Œå®¢æˆ·ç«¯ app æ˜¯ä¸å¯èƒ½åšåˆ°çš„ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="front-end" scheme="https://sanonz.github.io/categories/front-end/"/>
    
    
      <category term="JavaScript" scheme="https://sanonz.github.io/tags/JavaScript/"/>
    
      <category term="WebAssembly" scheme="https://sanonz.github.io/tags/WebAssembly/"/>
    
  </entry>
  
  <entry>
    <title>Let&#39;s Encrypt ä½¿ç”¨æ•™ç¨‹ï¼Œå…è´¹çš„ SSL è¯ä¹¦ï¼Œè®©ä½ çš„ç½‘ç«™æ‹¥æŠ± HTTPS</title>
    <link href="https://sanonz.github.io/2017/let&#39;s-encrypt-free-ssl-https/"/>
    <id>https://sanonz.github.io/2017/let&#39;s-encrypt-free-ssl-https/</id>
    <published>2017-11-15T07:45:47.000Z</published>
    <updated>2017-11-27T08:26:03.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Letâ€™s-Encrypt-ç®€ä»‹"><a href="#Letâ€™s-Encrypt-ç®€ä»‹" class="headerlink" title="Letâ€™s Encrypt ç®€ä»‹"></a>Letâ€™s Encrypt ç®€ä»‹</h3><p>Letâ€™s Encrypt æ˜¯å›½å¤–ä¸€ä¸ªå…¬å…±çš„å…è´¹SSLé¡¹ç›®ï¼Œç”± Linux åŸºé‡‘ä¼šæ‰˜ç®¡ï¼Œå®ƒçš„æ¥å¤´ä¸å°ï¼Œç”± Mozillaã€æ€ç§‘ã€Akamaiã€IdenTrust å’Œ EFF ç­‰ç»„ç»‡å‘èµ·ï¼Œç›®çš„å°±æ˜¯å‘ç½‘ç«™è‡ªåŠ¨ç­¾å‘å’Œç®¡ç†å…è´¹è¯ä¹¦ï¼Œä»¥ä¾¿åŠ é€Ÿäº’è”ç½‘ç”± HTTP è¿‡æ¸¡åˆ° HTTPSï¼Œç›®å‰ Facebook ç­‰å¤§å…¬å¸å¼€å§‹åŠ å…¥èµåŠ©è¡Œåˆ—ã€‚</p><p>Letâ€™s Encrypt å·²ç»å¾—äº† IdenTrust çš„äº¤å‰ç­¾åï¼Œè¿™æ„å‘³ç€å…¶è¯ä¹¦ç°åœ¨å·²ç»å¯ä»¥è¢« Mozillaã€Googleã€Microsoft å’Œ Apple ç­‰ä¸»æµçš„æµè§ˆå™¨æ‰€ä¿¡ä»»ï¼Œä½ åªéœ€è¦åœ¨ Web æœåŠ¡å™¨è¯ä¹¦é“¾ä¸­é…ç½®äº¤å‰ç­¾åï¼Œæµè§ˆå™¨å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å¤„ç†å¥½å…¶å®ƒçš„ä¸€åˆ‡ï¼ŒLetâ€™s Encrypt å®‰è£…ç®€å•ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚</p><h3 id="Certbot-ç®€ä»‹"><a href="#Certbot-ç®€ä»‹" class="headerlink" title="Certbot ç®€ä»‹"></a>Certbot ç®€ä»‹</h3><p><a href="https://certbot.eff.org/" target="_blank" rel="noopener">Certbot</a> ä¸º Letâ€™s Encrypt é¡¹ç›®å‘å¸ƒäº†ä¸€ä¸ªå®˜æ–¹çš„å®¢æˆ·ç«¯ Certbot ï¼Œåˆ©ç”¨å®ƒå¯ä»¥å®Œå…¨è‡ªåŠ¨åŒ–çš„è·å–ã€éƒ¨ç½²å’Œæ›´æ–°å®‰å…¨è¯ä¹¦ï¼Œå¹¶ä¸” Certbot æ˜¯æ”¯æŒæ‰€æœ‰ Unix å†…æ ¸çš„æ“ä½œç³»ç»Ÿã€‚</p><a id="more"></a><h3 id="å®‰è£…-Certbot-å®¢æˆ·ç«¯"><a href="#å®‰è£…-Certbot-å®¢æˆ·ç«¯" class="headerlink" title="å®‰è£… Certbot å®¢æˆ·ç«¯"></a>å®‰è£… Certbot å®¢æˆ·ç«¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> yum install certbot <span class="comment"># centos</span></span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="comment"># apt install certbot # ubuntu</span></span></div></pre></td></tr></table></figure><h3 id="Certbot-çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼"><a href="#Certbot-çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼" class="headerlink" title="Certbot çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼"></a>Certbot çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼</h3><ol><li><em>webroot</em> æ–¹å¼ï¼š certbot ä¼šåˆ©ç”¨æ—¢æœ‰çš„ web serverï¼Œåœ¨å…¶ web root ç›®å½•ä¸‹åˆ›å»ºéšè—æ–‡ä»¶ï¼ŒLetâ€™s Encrypt æœåŠ¡ç«¯ä¼šé€šè¿‡åŸŸåæ¥è®¿é—®è¿™äº›éšè—æ–‡ä»¶ï¼Œä»¥ç¡®è®¤ä½ çš„ç¡®æ‹¥æœ‰å¯¹åº”åŸŸåçš„æ§åˆ¶æƒã€‚</li><li><em>standalone</em> æ–¹å¼ï¼š Certbot ä¼šè‡ªå·±è¿è¡Œä¸€ä¸ª web server æ¥è¿›è¡ŒéªŒè¯ã€‚å¦‚æœæˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå·²ç»æœ‰ web server æ­£åœ¨è¿è¡Œ ï¼ˆæ¯”å¦‚ Nginx æˆ– Apache ï¼‰ï¼Œç”¨ standalone æ–¹å¼çš„è¯éœ€è¦å…ˆå…³æ‰å®ƒï¼Œä»¥å…å†²çªã€‚</li></ol><h3 id="è·å–è¯ä¹¦"><a href="#è·å–è¯ä¹¦" class="headerlink" title="è·å–è¯ä¹¦"></a>è·å–è¯ä¹¦</h3><h4 id="webroot-æ¨¡å¼"><a href="#webroot-æ¨¡å¼" class="headerlink" title="webroot æ¨¡å¼"></a>webroot æ¨¡å¼</h4><p>ä½¿ç”¨è¿™ç§æ¨¡å¼ä¼šåœ¨ web root ä¸­åˆ›å»º .well-known æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢åŒ…å«äº†ä¸€äº›éªŒè¯æ–‡ä»¶ï¼ŒCertbot ä¼šé€šè¿‡è®¿é—® example.com/.well-known/acme-challenge æ¥éªŒè¯ä½ çš„åŸŸåæ˜¯å¦ç»‘å®šçš„è¿™ä¸ªæœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦ç¼–è¾‘ nginx é…ç½®æ–‡ä»¶ç¡®ä¿å¯ä»¥è®¿é—®åˆšåˆšåˆ›å»ºçš„ .well-known æ–‡ä»¶å¤¹åŠé‡Œè¾¹å­˜æ”¾çš„éªŒè¯æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨ç”Ÿæˆè¯ä¹¦æ—¶è¿›è¡ŒéªŒè¯ï¼š</p><p>ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æŸ¥çœ‹ nginx é…ç½®æ–‡ä»¶åœ°å€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> sudo nginx -t</span></div><div class="line">nginx: the configuration file /usr/local/nginx/nginx.conf syntax is ok</div><div class="line">nginx: configuration file /usr/local/nginx/nginx.conf test is successful</div></pre></td></tr></table></figure><p>ç¼–è¾‘ /usr/local/nginx/nginx.conf é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    ...</div><div class="line"></div><div class="line">    location /.well-known/acme-challenge/ &#123;</div><div class="line">        default_type "text/plain";</div><div class="line">        root /var/www/example;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é‡å¯ nginx æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> nginx -s reload</span></div></pre></td></tr></table></figure><p>è·å–è¯ä¹¦ï¼Œ<code>--email</code> ä¸ºç”³è¯·è€…é‚®ç®±ï¼Œ<code>--webroot</code> ä¸º webroot æ–¹å¼ï¼Œ<code>-w</code> ä¸ºç«™ç‚¹ç›®å½•ï¼Œ<code>-d</code> ä¸ºè¦åŠ  https çš„åŸŸåï¼Œä»¥ä¸‹å‘½ä»¤ä¼šä¸º example.com å’Œ www.example.com è¿™ä¸¤ä¸ªåŸŸåç”Ÿæˆä¸€ä¸ªè¯ä¹¦ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> certbot certonly --email admin@example.com --webroot -w /var/www/example -d example.com -d www.example.com</span></div></pre></td></tr></table></figure><h4 id="standalone-æ¨¡å¼è·å–è¯ä¹¦"><a href="#standalone-æ¨¡å¼è·å–è¯ä¹¦" class="headerlink" title="standalone æ¨¡å¼è·å–è¯ä¹¦"></a>standalone æ¨¡å¼è·å–è¯ä¹¦</h4><p>ä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬çš„ä¸€äº›æœåŠ¡å¹¶æ²¡æœ‰æ ¹ç›®å½•ï¼Œä¾‹å¦‚ä¸€äº›å¾®æœåŠ¡ï¼Œè¿™æ—¶å€™ä½¿ç”¨ webroot æ¨¡å¼å°±èµ°ä¸é€šäº†ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨æ¨¡å¼ standalone æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¸éœ€è¦æŒ‡å®šç½‘ç«™æ ¹ç›®å½•ï¼Œä»–ä¼šè‡ªåŠ¨å¯ç”¨æœåŠ¡å™¨çš„443ç«¯å£ï¼Œæ¥éªŒè¯åŸŸåçš„å½’å±ã€‚æˆ‘ä»¬æœ‰å…¶ä»–æœåŠ¡ï¼ˆä¾‹å¦‚nginxï¼‰å ç”¨äº†443ç«¯å£ï¼Œå°±å¿…é¡»å…ˆåœæ­¢è¿™äº›æœåŠ¡ï¼Œåœ¨è¯ä¹¦ç”Ÿæˆå®Œæ¯•åï¼Œå†å¯ç”¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> certbot certonly --email admin@example.com --standalone -d example.com -d www.example.com</span></div></pre></td></tr></table></figure><h3 id="nginx-å¼€å¯-https"><a href="#nginx-å¼€å¯-https" class="headerlink" title="nginx å¼€å¯ https"></a>nginx å¼€å¯ https</h3><p>è¯ä¹¦ç”Ÿæˆå®Œæˆåå¯ä»¥åˆ° /etc/letsencrypt/live/ ç›®å½•ä¸‹æŸ¥çœ‹å¯¹åº”åŸŸåçš„è¯ä¹¦æ–‡ä»¶ã€‚ç¼–è¾‘ nginx é…ç½®æ–‡ä»¶ç›‘å¬ 443 ç«¯å£ï¼Œå¯ç”¨ SSLï¼Œå¹¶é…ç½® SSL çš„å…¬é’¥ã€ç§é’¥è¯ä¹¦è·¯å¾„ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line"></div><div class="line">    <span class="attribute">listen</span>       <span class="number">443</span>;</div><div class="line">    <span class="attribute">server_name</span>  example.com;</div><div class="line">    <span class="attribute">root</span>         /var/www/example;</div><div class="line">    <span class="attribute">index</span>        index.html index.htm;</div><div class="line"></div><div class="line">    <span class="attribute">ssl</span> <span class="literal">on</span>;</div><div class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/example.com/fullchain.pem;</div><div class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/example.com/privkey.pem;</div><div class="line"></div><div class="line">    <span class="attribute">charset</span> utf-<span class="number">8</span>;</div><div class="line"></div><div class="line">    ...</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ·»åŠ  HTTP è·³è½¬åˆ° HTTPSï¼š<br></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</div><div class="line">    <span class="attribute">server_name</span> example.com;</div><div class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>é‡å¯ nginx æœåŠ¡ï¼Œè®¿é—® <a href="https://example.com" target="_blank" rel="noopener">https://example.com</a> æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ</p><h3 id="è‡ªåŠ¨ç»­æœŸ"><a href="#è‡ªåŠ¨ç»­æœŸ" class="headerlink" title="è‡ªåŠ¨ç»­æœŸ"></a>è‡ªåŠ¨ç»­æœŸ</h3><p>Letâ€™s Encrypt æä¾›çš„è¯ä¹¦åªæœ‰90å¤©çš„æœ‰æ•ˆæœŸï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨åœ¨è¯ä¹¦åˆ°æœŸä¹‹å‰é‡æ–°è·å–è¿™äº›è¯ä¹¦ï¼ŒCertbot æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„å‘½ä»¤ <code>certbot renew</code>ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ <code>--dry-run</code> æµ‹è¯•æ˜¯å¦å¯ç”¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> certbot renew --dry-run</span></div></pre></td></tr></table></figure><p>linux ç³»ç»Ÿä¸Šæœ‰ cron å¯ä»¥æ¥æå®šè¿™ä»¶äº‹æƒ…ï¼Œä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æ–°å»ºä»»åŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> crontab -e</span></div></pre></td></tr></table></figure><p>å†™å…¥ä¸€ä¸‹ä»»åŠ¡å†…å®¹ã€‚è¿™æ®µå†…å®¹çš„æ„æ€å°±æ˜¯ æ¯éš” ä¸¤ä¸ªæœˆçš„ å‡Œæ™¨ 2:15 æ‰§è¡Œ æ›´æ–°æ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">15 2 * */2 * certbot renew --quiet --renew-hook <span class="string">"service nginx restart"</span></div></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>â€“quiet</td><td>æ‰§è¡Œæ—¶å±è”½é”™è¯¯ä»¥å¤–çš„æ‰€æœ‰è¾“å‡ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -q</td></tr><tr><td>â€“pre-hook</td><td>æ‰§è¡Œæ›´æ–°æ“ä½œä¹‹å‰è¦åšçš„äº‹æƒ…</td></tr><tr><td>â€“pre-hook</td><td>æ‰§è¡Œæ›´æ–°æ“ä½œä¹‹å‰è¦åšçš„äº‹æƒ…</td></tr><tr><td>â€“post-hook</td><td>æ‰§è¡Œæ›´æ–°æ“ä½œå®Œæˆåè¦åšçš„äº‹æƒ…</td></tr></tbody></table><h3 id="å–æ¶ˆè¯ä¹¦"><a href="#å–æ¶ˆè¯ä¹¦" class="headerlink" title="å–æ¶ˆè¯ä¹¦"></a>å–æ¶ˆè¯ä¹¦</h3><p>å¯ä»¥ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤å–æ¶ˆåˆšåˆšç”Ÿæˆçš„å¯†åŒ™ï¼Œä¹Ÿå°±æ˜¯ä»¥ä¸Šçš„åæ“ä½œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> certbot revoke --cert-path /etc/letsencrypt/live/example.com/cert.pem</span></div><div class="line"><span class="meta">$</span><span class="bash"> certbot delete --cert-name example.com</span></div></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæ•´ä¸ªç½‘ç«™å‡çº§åˆ° HTTPS å°±å®Œæˆäº†ã€‚</p><h3 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h3><ol><li>å¦‚æœåŠ ä¸Š HTTPS ä¹‹åğŸ˜Šé”ä¸å¤Ÿç»¿çš„è¯ï¼Œæ£€æŸ¥ä¸‹ç«™ç‚¹åŠ è½½çš„èµ„æºï¼ˆæ¯”å¦‚ jsã€cssã€ç…§ç‰‡ç­‰ï¼‰æ˜¯ä¸æ˜¯æœ‰ HTTP çš„ï¼Œæœ‰çš„è¯å°±ä¼šå¯¼è‡´å°é”å˜ä¸ºç°è‰²ã€‚</li><li>åœ¨æˆ‘ä»¬ä½¿ç”¨ HTTP çš„æ—¶å€™ï¼Œæ‰“å¼€ç½‘é¡µæ€»ä¼šé‡åˆ°ç¬¬ä¸‰æ–¹å·å·åŠ çš„ä¸€äº›è„šæœ¬å¹¿å‘Šï¼Œå¾ˆæ˜¯çƒ¦äººï¼Œå‡çº§ HTTPS åä»–ä»¬å°±æ— ä»ä¸‹æ‰‹äº†ï¼Œæ¬§è€¶ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Letâ€™s-Encrypt-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#Letâ€™s-Encrypt-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;Letâ€™s Encrypt ç®€ä»‹&quot;&gt;&lt;/a&gt;Letâ€™s Encrypt ç®€ä»‹&lt;/h3&gt;&lt;p&gt;Letâ€™s Encrypt æ˜¯å›½å¤–ä¸€ä¸ªå…¬å…±çš„å…è´¹SSLé¡¹ç›®ï¼Œç”± Linux åŸºé‡‘ä¼šæ‰˜ç®¡ï¼Œå®ƒçš„æ¥å¤´ä¸å°ï¼Œç”± Mozillaã€æ€ç§‘ã€Akamaiã€IdenTrust å’Œ EFF ç­‰ç»„ç»‡å‘èµ·ï¼Œç›®çš„å°±æ˜¯å‘ç½‘ç«™è‡ªåŠ¨ç­¾å‘å’Œç®¡ç†å…è´¹è¯ä¹¦ï¼Œä»¥ä¾¿åŠ é€Ÿäº’è”ç½‘ç”± HTTP è¿‡æ¸¡åˆ° HTTPSï¼Œç›®å‰ Facebook ç­‰å¤§å…¬å¸å¼€å§‹åŠ å…¥èµåŠ©è¡Œåˆ—ã€‚&lt;/p&gt;&lt;p&gt;Letâ€™s Encrypt å·²ç»å¾—äº† IdenTrust çš„äº¤å‰ç­¾åï¼Œè¿™æ„å‘³ç€å…¶è¯ä¹¦ç°åœ¨å·²ç»å¯ä»¥è¢« Mozillaã€Googleã€Microsoft å’Œ Apple ç­‰ä¸»æµçš„æµè§ˆå™¨æ‰€ä¿¡ä»»ï¼Œä½ åªéœ€è¦åœ¨ Web æœåŠ¡å™¨è¯ä¹¦é“¾ä¸­é…ç½®äº¤å‰ç­¾åï¼Œæµè§ˆå™¨å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å¤„ç†å¥½å…¶å®ƒçš„ä¸€åˆ‡ï¼ŒLetâ€™s Encrypt å®‰è£…ç®€å•ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;&lt;h3 id=&quot;Certbot-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#Certbot-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;Certbot ç®€ä»‹&quot;&gt;&lt;/a&gt;Certbot ç®€ä»‹&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://certbot.eff.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Certbot&lt;/a&gt; ä¸º Letâ€™s Encrypt é¡¹ç›®å‘å¸ƒäº†ä¸€ä¸ªå®˜æ–¹çš„å®¢æˆ·ç«¯ Certbot ï¼Œåˆ©ç”¨å®ƒå¯ä»¥å®Œå…¨è‡ªåŠ¨åŒ–çš„è·å–ã€éƒ¨ç½²å’Œæ›´æ–°å®‰å…¨è¯ä¹¦ï¼Œå¹¶ä¸” Certbot æ˜¯æ”¯æŒæ‰€æœ‰ Unix å†…æ ¸çš„æ“ä½œç³»ç»Ÿã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="back-end" scheme="https://sanonz.github.io/categories/back-end/"/>
    
    
      <category term="Http" scheme="https://sanonz.github.io/tags/Http/"/>
    
      <category term="Centos" scheme="https://sanonz.github.io/tags/Centos/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu æ­å»º phpã€mysqlã€nginx å¼€å‘ç¯å¢ƒ</title>
    <link href="https://sanonz.github.io/2017/ubuntu-install-nginx-php-mysql/"/>
    <id>https://sanonz.github.io/2017/ubuntu-install-nginx-php-mysql/</id>
    <published>2017-11-14T03:26:20.000Z</published>
    <updated>2017-11-28T01:53:12.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="php-å®‰è£…"><a href="#php-å®‰è£…" class="headerlink" title="php å®‰è£…"></a>php å®‰è£…</h3><p>è¿›å…¥ php å®˜æ–¹ç«™ç‚¹ç°åœ¨æ‰€éœ€ç‰ˆæœ¬ <a href="http://php.net/downloads.php" target="_blank" rel="noopener">http://php.net/downloads.php</a>ï¼Œæå–ä¸‹è½½åœ°å€ä½¿ç”¨ <code>wget</code> è¿›è¡Œä¸‹è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/</div><div class="line">$ wget http://cn.php.net/distributions/php-7.1.11.tar.gz</div></pre></td></tr></table></figure><p>è§£å‹æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ tar zxf php-7.1.11.tar.gz php-7.1.11-src</div><div class="line">$ <span class="built_in">cd</span> ./php-7.1.11-src</div></pre></td></tr></table></figure><p>å®‰è£…ä¾èµ–åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ apt install make build-essential libxml2-dev</div></pre></td></tr></table></figure><a id="more"></a><p>å…·ä½“çš„é…ç½®é€‰é¡¹åˆ—è¡¨ä½¿ç”¨ <code>./configure --help</code> æˆ–è€…æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ <a href="http://php.net/manual/zh/configure.about.php" target="_blank" rel="noopener">http://php.net/manual/zh/configure.about.php</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ ./configure \</div><div class="line">--prefix=/usr/<span class="built_in">local</span>/php-7.1.11 \</div><div class="line">--with-curl \</div><div class="line">--with-zlib \</div><div class="line">--with-iconv \</div><div class="line">--with-xmlrpc \</div><div class="line">--with-openssl \</div><div class="line">--with-pcre-jit \</div><div class="line">--with-pdo-mysql=shared,mysqlnd \</div><div class="line">--without-pear \</div><div class="line">--<span class="built_in">enable</span>-xml \</div><div class="line">--<span class="built_in">enable</span>-fpm \</div><div class="line">--<span class="built_in">disable</span>-dom \</div><div class="line">--<span class="built_in">enable</span>-shared \</div><div class="line">--<span class="built_in">enable</span>-sockets \</div><div class="line">--<span class="built_in">enable</span>-mbstring \</div><div class="line">--<span class="built_in">disable</span>-rpath \</div><div class="line">--<span class="built_in">disable</span>-fileinfo</div></pre></td></tr></table></figure><p>å¦‚æœæç¤º <code>Cannot find OpenSSL&#39;s &lt;evp.h&gt;</code> æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ apt install libssl-dev</div></pre></td></tr></table></figure><p>å¦‚æœæç¤º <code>Cannot find OpenSSL&#39;s libraries</code> æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ find / -name libssl.so</div><div class="line">/usr/lib/x86_64-linux-gnu/libssl.so</div><div class="line">$ ln -s /usr/lib/x86_64-linux-gnu/libssl.so /usr/lib</div></pre></td></tr></table></figure><p>åˆ›å»ºé…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ cp ./lib/php.ini-development ./lib/php.ini</div><div class="line">$ cp ./etc/php-fpm.conf.default ./etc/php-fpm.conf</div></pre></td></tr></table></figure><h3 id="mysql-å®‰è£…"><a href="#mysql-å®‰è£…" class="headerlink" title="mysql å®‰è£…"></a>mysql å®‰è£…</h3><p>å®‰è£…å‰å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰çš„ mysql ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ apt show mysql-server</div><div class="line">Package: mysql-server</div><div class="line">Version: 5.7.20-0ubuntu0.16.04.1</div><div class="line">Priority: optional</div><div class="line">Section: database</div><div class="line">Source: mysql-5.7</div><div class="line">...</div></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… mysqlï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt install mysql-server</div></pre></td></tr></table></figure><p>å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦è¾“å…¥å¯†ç ï¼š</p><img src="/2017/ubuntu-install-nginx-php-mysql/mysql-install-new-password.png"><p>ç„¶ååœ¨é‡å¤è¾“å…¥å¯†ç ï¼š</p><img src="/2017/ubuntu-install-nginx-php-mysql/mysql-install-repeat-password.png"><p>è®¾ç½®å®Œæˆåç­‰å¾…è‡ªåŠ¨å®‰è£…å³å¯ï¼Œå®‰è£…å®Œæˆ mysql é»˜è®¤å°±å¯åŠ¨äº†ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼Œåªè¦çœ‹åˆ°å‡ºæ¥ä¸€å¨ä»£ç å°±è¯´æ˜å·²ç»å¯åŠ¨æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ps -ef | grep mysqld</div></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ§åˆ¶ mysql æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ service mysql stop</div><div class="line">$ service mysql start</div><div class="line">$ service mysql restart</div></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›å…¥ mysql shell ç•Œé¢ï¼ŒæŒ‰æç¤ºè¾“å…¥å¯†ç ï¼Œå¯ä»¥ä½¿ç”¨ <code>show databases</code> æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨ï¼Œç”¨ <code>exit</code> å‘½ä»¤é€€å‡º shell ç•Œé¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">$ mysql -uroot -p</div><div class="line">Enter password:</div><div class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</div><div class="line">Your MySQL connection id is 7</div><div class="line">Server version: 5.7.20-0ubuntu0.16.04.1 (Ubuntu)</div><div class="line"></div><div class="line">Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</div><div class="line"></div><div class="line">Oracle is a registered trademark of Oracle Corporation and/or its</div><div class="line">affiliates. Other names may be trademarks of their respective</div><div class="line">owners.</div><div class="line"></div><div class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</div><div class="line"></div><div class="line">mysql&gt; show databases;</div><div class="line">+--------------------+</div><div class="line">| Database           |</div><div class="line">+--------------------+</div><div class="line">| information_schema |</div><div class="line">| mysql              |</div><div class="line">| performance_schema |</div><div class="line">| sys                |</div><div class="line">+--------------------+</div><div class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.02 sec)</div><div class="line"></div><div class="line">mysql&gt; <span class="built_in">exit</span>;</div><div class="line">Bye</div></pre></td></tr></table></figure><h3 id="nginx-å®‰è£…"><a href="#nginx-å®‰è£…" class="headerlink" title="nginx å®‰è£…"></a>nginx å®‰è£…</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt install nginx</div></pre></td></tr></table></figure><p>å…ˆå¯åŠ¨ nginxï¼Œç„¶åè®¿é—® ip æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ service nginx start</div></pre></td></tr></table></figure><p>ç¼–è¾‘ nginx é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  php è§£æ</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line"></div><div class="line">    ...</div><div class="line"></div><div class="line">    <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</div><div class="line">        <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</div><div class="line">        <span class="attribute">fastcgi_index</span>  index.php;</div><div class="line">        <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</div><div class="line">        <span class="attribute">include</span>        fastcgi_params;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ...</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ–°å»º php æ–‡ä»¶å¹¶è®¿é—®</p><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">phpinfo();</div></pre></td></tr></table></figure><p>å®Œæ¯•</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;php-å®‰è£…&quot;&gt;&lt;a href=&quot;#php-å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;php å®‰è£…&quot;&gt;&lt;/a&gt;php å®‰è£…&lt;/h3&gt;&lt;p&gt;è¿›å…¥ php å®˜æ–¹ç«™ç‚¹ç°åœ¨æ‰€éœ€ç‰ˆæœ¬ &lt;a href=&quot;http://php.net/downloads.php&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://php.net/downloads.php&lt;/a&gt;ï¼Œæå–ä¸‹è½½åœ°å€ä½¿ç”¨ &lt;code&gt;wget&lt;/code&gt; è¿›è¡Œä¸‹è½½ï¼š&lt;/p&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ wget http://cn.php.net/distributions/php-7.1.11.tar.gz&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è§£å‹æ–‡ä»¶&lt;/p&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ tar zxf php-7.1.11.tar.gz php-7.1.11-src&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ./php-7.1.11-src&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å®‰è£…ä¾èµ–åº“&lt;/p&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ apt install make build-essential libxml2-dev&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="back-end" scheme="https://sanonz.github.io/categories/back-end/"/>
    
    
      <category term="php" scheme="https://sanonz.github.io/tags/php/"/>
    
      <category term="mysql" scheme="https://sanonz.github.io/tags/mysql/"/>
    
      <category term="nginx" scheme="https://sanonz.github.io/tags/nginx/"/>
    
      <category term="ubuntu" scheme="https://sanonz.github.io/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>WebGL ä¸‰ç»´æ•™ç¨‹ - ç»˜åˆ¶çŸ©å½¢å’Œç‚¹ï¼ˆäºŒï¼‰</title>
    <link href="https://sanonz.github.io/2017/webgl-draw-rectangle-and-point/"/>
    <id>https://sanonz.github.io/2017/webgl-draw-rectangle-and-point/</id>
    <published>2017-11-03T11:29:20.000Z</published>
    <updated>2018-01-17T11:54:53.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Canvas-ç®€ä»‹"><a href="#Canvas-ç®€ä»‹" class="headerlink" title="Canvas ç®€ä»‹"></a>Canvas ç®€ä»‹</h3><p>åœ¨ HTML5 å‡ºç°ä¹‹å‰ï¼Œå¦‚æœæƒ³è¦åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºå›¾åƒï¼Œåªèƒ½ä½¿ç”¨ HTML æä¾›çš„ <code>&lt;img&gt;</code> æ ‡ç­¾ã€‚ç”¨è¿™ä¸ªæ ‡ç­¾è™½ç„¶ç®€å•ï¼Œä½†æ˜¯åªèƒ½æ˜¾ç¤ºé™æ€çš„å›¾ç‰‡ï¼Œä¸èƒ½è¿›è¡Œå®æ—¶ç»˜åˆ¶å’Œæ¸²æŸ“ï¼Œæ‰€ä»¥åæ¥å‡ºç°äº†ä¸€äº›ç¬¬ä¸‰æ–¹çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ Flash Player ç­‰ã€‚</p><p>Canvas ä¸­æ–‡è¯‘ä¸ºâ€œç”»å¸ƒâ€ï¼Œä½œä¸ºç”»å¸ƒæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>HTMLCanvasElement.getContext(contextType)</code> è·å– Canvas çš„ä¸Šä¸‹æ–‡ï¼Œç„¶åä½¿ç”¨ä¸Šä¸‹æ–‡æä¾›çš„ API åœ¨ç”»å¸ƒåŒºåŸŸç»˜åˆ¶å›¾æ¡ˆï¼Œæ¥ä¸‹æ¥åˆ†åˆ«ä»‹ç»æ€ä¹ˆä½¿ç”¨äºŒç»´å’Œä¸‰ç»´çš„æ–¹æ³•ç»˜åˆ¶çŸ©å½¢å’Œç‚¹ã€‚</p><a id="more"></a><p>contextType çš„å–å€¼å¦‚ä¸‹ï¼š</p><ol><li><code>&quot;2d&quot;</code> å»ºç«‹ä¸€ä¸ª <code>CanvasRenderingContext2D</code> å¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªäºŒç»´æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚</li><li><code>&quot;webgl&quot;</code> æˆ– <code>&quot;experimental-webgl&quot;</code> è¿™å°†åˆ›å»ºä¸€ä¸ª <code>WebGLRenderingContext</code> ä»£è¡¨ä¸‰ç»´æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡ (OpenGL ES 2.0)ã€‚</li></ol><h3 id="äºŒç»´ç»˜åˆ¶çŸ©å½¢"><a href="#äºŒç»´ç»˜åˆ¶çŸ©å½¢" class="headerlink" title="äºŒç»´ç»˜åˆ¶çŸ©å½¢"></a>äºŒç»´ç»˜åˆ¶çŸ©å½¢</h3><p>é¦–å…ˆè¦å†™ä¸€ä¸ª canvas å…ƒç´ ï¼Œç„¶åè·å–äºŒç»´æ¸²æŸ“çš„ä¸Šä¸‹æ–‡ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"gl"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div></pre></td></tr></table></figure><p>ç»˜åˆ¶äºŒç»´çŸ©å½¢å¾ˆç®€å•ï¼Œåªéœ€è¦è°ƒç”¨ä¸Šä¸‹æ–‡çš„ <code>ctx.fillRect(x, y, width, height)</code> æ–¹æ³•å³å¯ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>x</td><td>çŸ©å½¢èµ·å§‹ç‚¹çš„ x è½´åæ ‡</td></tr><tr><td>y</td><td>çŸ©å½¢èµ·å§‹ç‚¹çš„ y è½´åæ ‡</td></tr><tr><td>width</td><td>çŸ©å½¢çš„å®½åº¦</td></tr><tr><td>height</td><td>çŸ©å½¢çš„é«˜åº¦</td></tr></tbody></table><p>åœ¨è°ƒç”¨ä¹‹å‰é¦–å…ˆä½¿ç”¨ <code>ctx.fillStyle</code> è®¾ç½®è¦å¡«å……çš„é¢œè‰²ï¼Œè¿™é‡Œæˆ‘ä»¬å¡«å……çš„æ˜¯è“è‰²ï¼Œå…·ä½“ç»˜åˆ¶çŸ©å½¢çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'gl'</span>).getContext(<span class="string">'2d'</span>);</div><div class="line">ctx.fillStyle = <span class="string">'rgba(0, 0, 255, 1.0)'</span>;</div><div class="line">ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">300</span>);</div></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºä¸€ä¸ªè“è‰²çš„çŸ©å½¢ <a href="https://stackblitz.com/edit/canvas-draw-rectangle" target="_blank" rel="noopener">ç‚¹å‡»è¿è¡Œ</a>ï¼š</p><img src="/2017/webgl-draw-rectangle-and-point/draw-rectangle-blue@2x.png" width="320" height="316"><h3 id="ä¸‰ç»´ç»˜åˆ¶çŸ©å½¢"><a href="#ä¸‰ç»´ç»˜åˆ¶çŸ©å½¢" class="headerlink" title="ä¸‰ç»´ç»˜åˆ¶çŸ©å½¢"></a>ä¸‰ç»´ç»˜åˆ¶çŸ©å½¢</h3><p>å’ŒäºŒç»´ç»˜åˆ¶çŸ©å½¢ä¸€æ ·ï¼Œåœ¨ä¸‰ç»´ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼Œé¦–å…ˆè¦è·å– <code>WebGLRenderingContext</code> çš„å¯¹è±¡ï¼Œå…¶æ¬¡æ˜¯è°ƒç”¨ <code>gl.clearColor(red, green, blue, alpha)</code> è®¾ç½®èƒŒæ™¯è‰²ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>red</td><td>æŒ‡å®šæ¸…é™¤ç¼“å†²æ—¶çš„çº¢è‰²å€¼ã€‚é»˜è®¤å€¼ï¼š0</td></tr><tr><td>green</td><td>æŒ‡å®šæ¸…é™¤ç¼“å†²æ—¶çš„ç»¿è‰²å€¼ã€‚é»˜è®¤å€¼ï¼š0</td></tr><tr><td>blue</td><td>æŒ‡å®šæ¸…é™¤ç¼“å†²æ—¶çš„è“è‰²å€¼ã€‚é»˜è®¤å€¼ï¼š0</td></tr><tr><td>alpha</td><td>æŒ‡å®šæ¸…é™¤ç¼“å†²æ—¶çš„ä¸é€æ˜åº¦ã€‚é»˜è®¤å€¼ï¼š0</td></tr></tbody></table><p>ä¸‹é¢åˆ—å‡ºçš„æ˜¯ä¸€äº›å¸¸ç”¨çš„é¢œè‰²ï¼š</p><table><thead><tr><th>è‰²å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>(1.0, 0.0, 0.0, 1.0)</td><td>çº¢è‰²</td></tr><tr><td>(0.0, 1.0, 0.0, 1.0)</td><td>ç»¿è‰²</td></tr><tr><td>(0.0, 0.0, 1.0, 1.0)</td><td>è“è‰²</td></tr><tr><td>(1.0, 1.0, 0.0, 1.0)</td><td>é»„è‰²</td></tr><tr><td>(1.0, 0.0, 1.0, 1.0)</td><td>ç´«è‰²</td></tr><tr><td>(0.0, 1.0, 1.0, 1.0)</td><td>é’è‰²</td></tr><tr><td>(1.0, 1.0, 1.0, 1.0)</td><td>ç™½è‰²</td></tr></tbody></table><p>ç„¶ååœ¨è°ƒç”¨ <code>gl.clear(mask)</code> ç”¨èƒŒæ™¯è‰²æ¸…ç©º canvas ç»˜å›¾åŒºåŸŸï¼Œ<code>mask</code> å‚æ•°ä¸ºæŒ‡å®šå¾…æ¸…ç©ºçš„ç¼“å†²åŒºï¼Œå¯ä»¥ä½¿ç”¨ä½æ“ä½œç¬¦ <code>OR(|)</code> æ¥æŒ‡å®šå¤šä¸ªç¼“å†²åŒºï¼Œå¯ä»¥å–çš„å¸¸é‡å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å¸¸é‡</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>gl.COLOR_BUFFER_BIT</td><td>æŒ‡å®šé¢œè‰²ç¼“å†²åŒº</td></tr><tr><td>gl.DEPTH_BUFFER_BIT</td><td>æŒ‡å®šæ·±åº¦ç¼“å†²åŒº</td></tr><tr><td>gl.STENCIL_BUFFER_BIT</td><td>æŒ‡å®šæ¨¡ç‰ˆç¼“å†²åŒº</td></tr></tbody></table><p>è¿™é‡Œæˆ‘ä»¬è®¾ç½®çš„èƒŒæ™¯è‰²ä¸ºé»‘è‰²ï¼Œæœ€åçš„ä»£ç å¦‚ä¸‹ï¼Œè¿è¡Œåæˆ‘ä»¬æƒ³è¦çš„çŸ©å½¢å°±å‡ºæ¥äº†ï¼Œè¿™ä¸ªä¹Ÿæ˜¯æœ€çŸ­çš„ WebGL ç¨‹åºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'gl'</span>).getContext(<span class="string">'webgl'</span>);</div><div class="line">gl.clearColor(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</div><div class="line">gl.clear(<span class="keyword">this</span>.gl.COLOR_BUFFER_BIT);</div></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœä¸ºä¸€ä¸ªé»‘è‰²çŸ©å½¢ <a href="https://stackblitz.com/edit/webgl-draw-rectangle" target="_blank" rel="noopener">ç‚¹å‡»è¿è¡Œ</a>ï¼š</p><img src="/2017/webgl-draw-rectangle-and-point/draw-rectangle-black@2x.png" width="318" height="318"><h3 id="ä¸‰ç»´ç»˜åˆ¶ç‚¹"><a href="#ä¸‰ç»´ç»˜åˆ¶ç‚¹" class="headerlink" title="ä¸‰ç»´ç»˜åˆ¶ç‚¹"></a>ä¸‰ç»´ç»˜åˆ¶ç‚¹</h3><p>å‰è¾¹æˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨ä¸‰è¡Œä»£ç åˆ†åˆ«ç»˜åˆ¶äº†äºŒç»´ä¸ä¸‰ç»´çš„çŸ©å½¢ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨äºŒç»´ä¸–ç•Œåæ ‡æ˜¯ <code>(x, y)</code>ï¼Œåœ¨ä¸‰ç»´ä¸–ç•Œæ¯”äºŒç»´å¤šäº†ä¸€ä¸ª <code>z</code> ï¼ˆæ·±åº¦ï¼‰ï¼Œåæ ‡ä¹Ÿå°±æ˜¯ <code>(x, y, z)</code>ï¼Œç„¶åæ¨æµ‹æ ¹æ®äºŒç»´çš„ä»£ç å¤šåŠ ä¸€ä¸ª <code>z</code> åæ ‡åº”è¯¥å°±èƒ½ç”»ä¸‰ç»´ä¸­çš„çŸ©å½¢ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'gl'</span>).getContext(<span class="string">'webgl'</span>);</div><div class="line">gl.drawColor(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</div><div class="line">gl.drawPoint(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>); <span class="comment">// ç‚¹çš„ä½ç½®å’Œå¤§å°</span></div></pre></td></tr></table></figure><p>ç„¶è€Œäº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œå½“æˆ‘ä»¬è¿è¡Œä»£ç å‘ç°å‡ºé”™äº†ï¼Œå®é™…çš„ä¸‰ç»´ç»˜å›¾è¦æ¯”äºŒç»´å¤æ‚çš„å¤šï¼ŒWebGL ä¾èµ–äºä¸€ç§æ–°çš„ç§°ä¸º <em>ç€è‰²å™¨</em> (shader) çš„ç»˜å›¾æœºåˆ¶ï¼Œä¸Šä¸€ç¯‡ <a href="/2017/webgl-introduction/" title="WebGL ä¸‰ç»´æ•™ç¨‹ - WebGL ä»‹ç»ï¼ˆä¸€ï¼‰">WebGL ä¸‰ç»´æ•™ç¨‹ - WebGL ä»‹ç»ï¼ˆä¸€ï¼‰</a> æˆ‘ä»¬ç®€å•ä»‹ç»äº† WebGLï¼Œå…¶ä¸­æœ‰æåŠåˆ° GLSL (OpenGL Shading Language)ï¼Œé‚£ä¹ˆ GLSL åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼ŸGLSL ä¸ºç€è‰²è¯­è¨€ï¼Œç”¨æ¥ç¼–å†™ shader è„šæœ¬ï¼Œç€è‰²å™¨åˆ†ä¸º <em>é¡¶ç‚¹ç€è‰²å™¨</em> (Vertex shader) ä¸ <em>ç‰‡å…ƒç€è‰²å™¨</em> (Fragment shader) ä¸¤éƒ¨åˆ†ï¼Œç€è‰²å™¨æä¾›äº†çµæ´»è€Œå¼ºå¤§çš„ç»˜åˆ¶äºŒç»´æˆ–ä¸‰ç»´å›¾å½¢çš„æ–¹æ³•ï¼Œæ­£æ˜¯å› ä¸ºå®ƒçš„å¼ºå¤§ï¼Œå› æ­¤ä¹Ÿå¸¦æ¥äº†ä½¿ç”¨ä¸Šçš„å¤æ‚åº¦ï¼Œæ¥ä¸‹æ¥çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€æ­¥æ­¥å»æ·±å…¥ç ”ç©¶å’Œç†è§£å®ƒã€‚</p><h4 id="ä¸‰ç»´ä¸–ç•Œçš„åæ ‡ç³»ç»Ÿ"><a href="#ä¸‰ç»´ä¸–ç•Œçš„åæ ‡ç³»ç»Ÿ" class="headerlink" title="ä¸‰ç»´ä¸–ç•Œçš„åæ ‡ç³»ç»Ÿ"></a>ä¸‰ç»´ä¸–ç•Œçš„åæ ‡ç³»ç»Ÿ</h4><p>WebGL ä¸­çš„åæ ‡æ˜¯ç”± (x, y, z) ç»„æˆï¼Œä¸‹å›¾æè¿°äº† WebGL åæ ‡ç³»ã€‚z è½´è¡¨ç¤ºæ·±åº¦ï¼Œæ­£å€¼ z è¡¨ç¤ºå¯¹è±¡åœ¨å±å¹•/æŸ¥çœ‹å™¨é™„è¿‘ï¼Œè€Œè´Ÿå€¼ z è¡¨ç¤ºè¯¥å¯¹è±¡ä¸åœ¨å±å¹•ä¸Šã€‚åŒæ ·ï¼Œx çš„æ­£å€¼è¡¨ç¤ºå¯¹è±¡æ˜¯å±å¹•å³ä¾§ï¼Œè´Ÿå€¼è¡¨ç¤ºå¯¹è±¡æ˜¯å·¦ä¾§ã€‚åŒæ ·ï¼Œy çš„æ­£å€¼å’Œè´Ÿå€¼è¡¨ç¤ºå¯¹è±¡ä½äºå±å¹•é¡¶éƒ¨æˆ–åº•éƒ¨çš„åº•éƒ¨ã€‚</p><img src="/2017/webgl-draw-rectangle-and-point/coordinate.png"><h4 id="é¡¶ç‚¹ä¸ç‰‡å…ƒç€è‰²å™¨ä»‹ç»"><a href="#é¡¶ç‚¹ä¸ç‰‡å…ƒç€è‰²å™¨ä»‹ç»" class="headerlink" title="é¡¶ç‚¹ä¸ç‰‡å…ƒç€è‰²å™¨ä»‹ç»"></a>é¡¶ç‚¹ä¸ç‰‡å…ƒç€è‰²å™¨ä»‹ç»</h4><ul><li>é¡¶ç‚¹ä½ ç€è‰²å™¨æ˜¯ç”¨æ¥æè¿°é¡¶ç‚¹ç‰¹å¾ï¼ˆå¦‚ä½ç½®ã€é¢œè‰²ç­‰ï¼‰çš„ç¨‹åºã€‚<em>é¡¶ç‚¹</em> æ˜¯æŒ‡äºŒç»´æˆ–ä¸‰ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œå°†è¿™äº›é¡¶ç‚¹è¿æ¥èµ·æ¥ï¼Œå¯ä»¥å½¢æˆçº¿æˆ–ä¸‰è§’å½¢ï¼ŒWebGL ä¸­æœ€å¸¸ç”¨çš„æ˜¯ä¸‰è§’å½¢ã€‚</li><li>ç‰‡å…ƒç€è‰²å™¨æ˜¯è¿›è¡Œé€ç‰‡å…ƒå¤„ç†è¿‡ç¨‹çš„ç¨‹åºï¼Œå¦‚å¤„ç†å…‰ç…§ï¼Œç‰‡å…ƒå² WebGL æœ¯è¯­ï¼Œå¯ä»¥ç†è§£ä¸ºåƒç´ ã€‚</li></ul><h4 id="åˆ›å»ºç€è‰²å™¨æ­¥éª¤"><a href="#åˆ›å»ºç€è‰²å™¨æ­¥éª¤" class="headerlink" title="åˆ›å»ºç€è‰²å™¨æ­¥éª¤"></a>åˆ›å»ºç€è‰²å™¨æ­¥éª¤</h4><p>(ä¸€)ã€ä½¿ç”¨ <code>gl.createProgram()</code> æ–¹æ³•ç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ä¸ª <code>WebGLProgram</code> å¯¹è±¡ã€‚<br>(äºŒ)ã€ä½¿ç”¨ <code>gl.createShader(type)</code> åˆ›å»ºä¸€ä¸ª <code>WebGLShader</code> ç€è‰²å™¨å¯¹è±¡ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>type</td><td>gl.VERTEX_SHADER ä¸ºé¡¶ç‚¹ç€è‰²å™¨ï¼Œgl.FRAGMENT_SHADER ä¸ºç‰‡å…ƒç€è‰²å™¨</td></tr></tbody></table><p>(ä¸‰)ã€ä½¿ç”¨ <code>gl.shaderSource(shader, source)</code> æŒ‚æ¥ <code>source</code> (GLSL) æºä»£ç åˆ° <code>shader</code> ä¸Šã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>shader</td><td>åŒ…å«é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨çš„ <code>WebGLShader</code> å¯¹è±¡</td></tr><tr><td>source</td><td>ä¸€å¨å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ç€è‰²å™¨ (GLSL) è¯­è¨€ä»£ç </td></tr></tbody></table><p>(å››)ã€ä½¿ç”¨ <code>gl.compileShader(shader)</code> ç¼–è¯‘ä¸€ä¸ª GLSL ç€è‰²å™¨ï¼Œä½¿å…¶æˆä¸ºä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼Œç„¶åå°±å¯ä»¥è¢« <code>WebGLProgram</code> å¯¹è±¡æ‰€ä½¿ç”¨ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>shader</td><td>ä¸€ä¸ªç‰‡å…ƒæˆ–é¡¶ç‚¹ç€è‰²å™¨</td></tr></tbody></table><p>(äº”)ã€ä½¿ç”¨ <code>gl.attachShader(program, shader)</code> æ–¹æ³•æŠŠç€è‰²å™¨ <code>shader</code> æ·»åŠ åˆ° <code>program</code>ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>program</td><td>åŒ…å«é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨çš„ <code>WebGLProgram</code> å¯¹è±¡</td></tr><tr><td>shader</td><td>ä¸€ä¸ªç±»å‹ä¸ºç‰‡æ®µæˆ–è€…é¡¶ç‚¹çš„ <code>WebGLShader</code> å¯¹è±¡</td></tr></tbody></table><p>(å…­)ã€ä½¿ç”¨ <code>gl.linkProgram(program)</code> å’Œ <code>gl.useProgram(program)</code> åˆ†åˆ«é“¾æ¥å’Œä½¿ç”¨ <code>WebGLProgram</code> å¯¹è±¡ã€‚</p><p>ç»¼ä¸Šå…­ä¸ªæ­¥éª¤å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªé¡¶ç‚¹ç€è‰²å™¨æˆ–ç‰‡å…ƒç€è‰²å™¨ï¼Œä¸ºäº†æ–¹ä¾¿è¿™é‡ŒæŠŠåˆ›å»ºç€è‰²å™¨å°è£…æˆäº†ä¸€ä¸ª <code>createShader(type, source)</code> æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line"></div><div class="line">  createShader(type, source) &#123;</div><div class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ª`WebGLShader`ç€è‰²å™¨å¯¹è±¡ï¼Œ`type`ä¸º`gl.VERTEX_SHADER`(é¡¶ç‚¹ç€è‰²å™¨)æˆ–`gl.FRAGMENT_SHADER`ç‰‡å…ƒç€è‰²å™¨</span></div><div class="line">    <span class="keyword">const</span> shader = <span class="keyword">this</span>.gl.createShader(type);</div><div class="line"></div><div class="line">    <span class="comment">// æŒ‚æ¥`source`(GLSL)æºä»£ç åˆ°`shader`ä¸Š</span></div><div class="line">    <span class="keyword">this</span>.gl.shaderSource(shader, source);</div><div class="line"></div><div class="line">    <span class="comment">// ç¼–è¯‘`shader`(GLSL)ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä»¥ä¾¿è¢«`WebGLProgram`ä½¿ç”¨</span></div><div class="line">    <span class="keyword">this</span>.gl.compileShader(shader);</div><div class="line"></div><div class="line">    <span class="comment">// æ·»åŠ ä¸€ä¸ªç‰‡å…ƒç€è‰²å™¨æˆ–è€…é¡¶ç‚¹ç€è‰²å™¨</span></div><div class="line">    <span class="keyword">this</span>.gl.attachShader(<span class="keyword">this</span>.shaderProgram, shader);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> shader;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–é¡¶ç‚¹å’Œç‰‡å…ƒç€è‰²å™¨"><a href="#åˆå§‹åŒ–é¡¶ç‚¹å’Œç‰‡å…ƒç€è‰²å™¨" class="headerlink" title="åˆå§‹åŒ–é¡¶ç‚¹å’Œç‰‡å…ƒç€è‰²å™¨"></a>åˆå§‹åŒ–é¡¶ç‚¹å’Œç‰‡å…ƒç€è‰²å™¨</h4><p>æ¥ä¸‹æ¥åœ¨æ·»åŠ ä¸€ä¸ª <code>constructor()</code> å’Œ <code>initShader()</code> æ–¹æ³•ï¼Œç”¨æ¥è·å– <code>WebGLRenderingContext</code> å¯¹è±¡å’Œåˆå§‹åŒ–é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.gl = self.gl = <span class="built_in">document</span>.getElementById(<span class="string">'gl'</span>).getContext(<span class="string">'webgl'</span>);</div><div class="line">    <span class="keyword">this</span>.gl.viewport(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.gl.drawingBufferWidth, <span class="keyword">this</span>.gl.drawingBufferHeight);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  ...</div><div class="line"></div><div class="line">  initShader() &#123;</div><div class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ª`WebGLProgram`</span></div><div class="line">    <span class="keyword">this</span>.shaderProgram = <span class="keyword">this</span>.gl.createProgram();</div><div class="line"></div><div class="line">    <span class="comment">// åˆ›å»ºé¡¶ç‚¹ç€è‰²å™¨</span></div><div class="line">    <span class="keyword">this</span>.createShader(<span class="keyword">this</span>.gl.VERTEX_SHADER, <span class="string">`</span></div><div class="line"><span class="string">      attribute vec4 a_Position;</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">      void main() &#123;</span></div><div class="line"><span class="string">        gl_Position = a_Position;</span></div><div class="line"><span class="string">        gl_PointSize = 10.0;</span></div><div class="line"><span class="string">      &#125;</span></div><div class="line"><span class="string">    `</span>);</div><div class="line"></div><div class="line">    <span class="comment">// åˆ›å»ºç‰‡å…ƒç€è‰²å™¨</span></div><div class="line">    <span class="keyword">this</span>.createShader(<span class="keyword">this</span>.gl.FRAGMENT_SHADER, <span class="string">`</span></div><div class="line"><span class="string">      void main() &#123;</span></div><div class="line"><span class="string">        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);</span></div><div class="line"><span class="string">      &#125;</span></div><div class="line"><span class="string">    `</span>);</div><div class="line"></div><div class="line">    <span class="comment">// åˆ†åˆ«é“¾æ¥å’Œä½¿ç”¨</span></div><div class="line">    <span class="keyword">this</span>.gl.linkProgram(<span class="keyword">this</span>.shaderProgram);</div><div class="line">    <span class="keyword">this</span>.gl.useProgram(<span class="keyword">this</span>.shaderProgram);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  ...</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¸Šè¾¹ç¨‹åºä¸­ç¬¬ 16-21 è¡Œç¼–å†™äº†é¡¶ç‚¹ç€è‰²å™¨ï¼Œ26-28 è¡Œç¼–å†™äº†ç‰‡å…ƒç€è‰²å™¨ï¼Œä»è¿™ä¸¤å—çš„ç¨‹åºä¸­å¯ä»¥çœ‹å‡ºï¼ŒGLSL è¯­è¨€æ˜¯è·Ÿ C è¯­è¨€éå¸¸ç±»ä¼¼çš„ï¼Œéƒ½å¿…é¡»åŒ…å«ä¸€ä¸ª <code>main()</code> å‡½æ•°ï¼Œ<code>main()</code> å‰è¾¹çš„å…³é”®å­— <code>void</code> æ˜¯è¡¨ç¤ºè¿™ä¸ªå‡½æ•°ä¸ä¼šæœ‰è¿”å›å€¼ï¼Œè¿˜æœ‰ä¸èƒ½ä¸º <code>main()</code> å‡½æ•°æŒ‡å®šå‚æ•°ã€‚</p><p>åœ¨é¡¶ç‚¹ç€è‰²å™¨å’Œä¸­ä½¿ç”¨äº†ï¼š<code>gl_Position</code>ã€<code>gl_Position</code> å’Œç‰‡å…ƒç€è‰²å™¨ä¸­çš„ï¼š <code>gl_FragColor</code>ï¼Œè¿™äº›åˆ†åˆ«ä¸ºå†…ç½®çš„å˜é‡ï¼Œæˆ‘ä»¬æŠŠç›¸åº”çš„å€¼èµ‹å€¼ç»™ç›¸åº”çš„å†…ç½®å˜é‡å°±å¯ä»¥å¾—åˆ°ç›¸åº”çš„æ¸²æŸ“ç»“æœï¼Œå®ƒä»¬çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>gl_Position</td><td>è¡¨ç¤ºé¡¶ç‚¹ä½ç½®</td></tr><tr><td>gl_Position</td><td>è¡¨ç¤ºç‚¹çš„å°ºå¯¸</td></tr><tr><td>gl_FragColor</td><td>æŒ‡å®šç‰‡å…ƒé¢œè‰²ï¼ˆRGBAï¼‰</td></tr></tbody></table><p>å¹¶ä¸” GLSL è¯­è¨€ä¸ºå¼ºç±»å‹è¯­è¨€ï¼Œå¦‚æœæŠŠç¬¬ 20 è¡Œçš„ <code>gl_PointSize = 10.0</code> æ”¹ä¸º <code>gl_PointSize = 10</code> å°±ä¼šå¯¼è‡´ç¨‹åºæŠ¥é”™ï¼Œä¸Šè¾¹ä½¿ç”¨åˆ°çš„ç±»å‹ä»‹ç»å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>float</td><td>è¡¨ç¤ºæµ®ç‚¹æ•°</td></tr><tr><td>vec4</td><td>è¡¨ç¤ºç”±å››ä¸ªæµ®ç‚¹æ•°ç»„æˆçš„çŸ¢é‡ï¼Œå¦å¤–ä¸‰ç§ï¼švec1ã€vec2ã€vec3</td></tr></tbody></table><p>å…¶ä¸­ <code>vec4</code> åœ¨è¿™é‡Œæœ‰ä¸¤ç§èº«ä»½ï¼Œå®ƒæ—¢èƒ½å£°æ˜å˜é‡ç±»å‹ï¼š <code>attribute vec4 a_Position</code>ï¼Œåˆèƒ½ä½œä¸º <em>æ„é€ å‡½æ•°</em> (Constructor Functions) ä½¿ç”¨ï¼š<code>gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)</code>ï¼Œæ„é€ å‡½æ•°çš„åç§°å’Œåˆ›å»ºçš„å˜é‡çš„åç§°æ˜¯ä¸€è‡´çš„ã€‚æœ€å‰è¾¹çš„å…³é”® <code>attribute</code> è¢«ç§°ä¸º <em>å‚¨å­˜é™å®šç¬¦</em> (Storage Qualifier)ï¼Œ<code>attribute</code> å¿…é¡»å£°æ˜ä¸ºå…¨å±€å˜é‡ï¼Œæ•°æ®å°†ä»ç€è‰²å™¨å¤–éƒ¨ä¼ ç»™è¯¥å˜é‡ã€‚</p><p>ç€è‰²å™¨åˆå§‹åŒ–å®Œæˆåå°±å¯ä»¥å¼€å§‹ç”»ç‚¹äº†ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>(ä¸€)ã€ä½¿ç”¨ <code>gl.getAttribLocation(program, name)</code> æ–¹æ³•è·å– <code>attribute</code> å˜é‡çš„å‚¨å­˜ä½ç½®ã€‚</p><table><thead><tr><th>ç±»å‹</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>program</td><td>åŒ…å«é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨çš„ <code>WebGLProgram</code> å¯¹è±¡</td></tr><tr><td>name</td><td>ç€è‰²å™¨ <code>attribute</code> å˜é‡çš„åç§°</td></tr></tbody></table><p>(äºŒ)ã€ä½¿ç”¨ <code>gl.vertexAttrib3f(index, v0, v1, v2)</code> æ–¹æ³•å‘ <code>attribute</code> å˜é‡èµ‹å€¼ã€‚</p><table><thead><tr><th>ç±»å‹</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>index</td><td><code>attribute</code> çš„å‚¨å­˜ä½ç½®</td></tr><tr><td>v0</td><td>æŒ‡å®šå¡«å…… <code>attribute</code> å˜é‡ç¬¬ä¸€ä¸ªåˆ†é‡çš„å€¼</td></tr><tr><td>v1</td><td>æŒ‡å®šå¡«å…… <code>attribute</code> å˜é‡ç¬¬äºŒä¸ªåˆ†é‡çš„å€¼</td></tr><tr><td>v2</td><td>æŒ‡å®šå¡«å…… <code>attribute</code> å˜é‡ç¬¬ä¸‰ä¸ªåˆ†é‡çš„å€¼</td></tr></tbody></table><p>(ä¸‰)ã€ä½¿ç”¨ <code>gl.drawArrays(mode, first, count)</code> æ–¹æ³•è¿›è¡Œç»˜åˆ¶ã€‚</p><table><thead><tr><th>ç±»å‹</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>mode</td><td>ç»˜åˆ¶çš„æ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©çš„å¸¸é‡ï¼šgl.POINTSã€gl.LINESã€gl.LINE_STRIPã€gl.LINE_LOOPã€gl.TRIANGLESã€gl.TRIANGLE_STRIPã€gl.TRIANGLE_FAN</td></tr><tr><td>first</td><td>æŒ‡å®šä»å“ªä¸ªé¡¶ç‚¹å¼€å§‹ç»˜åˆ¶</td></tr><tr><td>count</td><td>æŒ‡å®šç»˜åˆ¶éœ€è¦å¤šå°‘ä¸ªé¡¶ç‚¹</td></tr></tbody></table><p><code>mode</code> å¯ä»¥ç»˜åˆ¶çš„åŸºæœ¬å›¾å½¢è§£æï¼š</p><table><thead><tr><th>mode</th><th>å›¾å½¢</th><th>è¡¨è¿°</th></tr></thead><tbody><tr><td>gl.POINTS</td><td>ç‚¹</td><td>ä¸€ç³»åˆ—ç‚¹ï¼Œç»˜åˆ¶åœ¨ v0ã€v1ã€v2 â€¦ å¤„</td></tr><tr><td>gl.LINES</td><td>çº¿æ®µ</td><td>ä¸€ç³»åˆ—å•ç‹¬çš„çº¿æ®µï¼Œç»˜åˆ¶åœ¨ (v0, v1)ã€(v2, v3)ã€(v4, v5) â€¦ å¤„ï¼Œå¦‚æœç‚¹çš„ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œæœ€åä¸€ä¸ªç‚¹å°†è¢«å¿½ç•¥</td></tr><tr><td>gl.LINE_STRIP</td><td>çº¿æ¡</td><td>ä¸€ç³»åˆ—è¿æ¥çš„çº¿æ®µ,è¢«ç»˜åˆ¶åœ¨(v0,v1)ã€(v1,v2)ã€(v2,v3) â€¦ å¤„ï¼Œç¬¬ 1 ä¸ªç‚¹æ˜¯ç¬¬1æ¡çº¿æ®µçš„èµ·ç‚¹ï¼Œç¬¬ 2 ä¸ªç‚¹æ˜¯ç¬¬ 1 æ¡çº¿æ®µçš„ç»ˆç‚¹å’Œç¬¬ 2 æ¡çº¿æ®µçš„èµ·ç‚¹ â€¦ ç¬¬ i(i&gt;1) ä¸ªç‚¹æ˜¯ç¬¬ i-1 æ¡çº¿æ®µçš„ç»ˆç‚¹å’Œç¬¬ i æ¡çº¿æ®µçš„èµ·ç‚¹ï¼Œä»¥æ­¤ç±»æ¨ã€‚æœ€åä¸€ä¸ªç‚¹æ˜¯æœ€åä¸€æ¡çº¿æ®µçš„ç»ˆç‚¹</td></tr><tr><td>gl.LINE_LOOP</td><td>å›è·¯</td><td>ä¸€ç³»åˆ—è¿æ¥çš„çº¿æ®µã€‚ä¸gl.LINE_STRIP ç»˜åˆ¶çš„çº¿æ¡ç›¸æ¯”ï¼Œå¢åŠ äº†ä¸€æ¡ä»æœ€åä¸€ä¸ªç‚¹åˆ°ç¬¬1ä¸ªç‚¹çš„çº¿æ®µã€‚å› æ­¤ï¼Œçº¿æ®µè¢«ç»˜åˆ¶åœ¨ (v0, v1)ã€(v1, v2) â€¦ (vn, v0) å¤„ï¼Œå…¶ä¸­ vn æ˜¯æœ€åä¸€ä¸ªç‚¹</td></tr><tr><td>gl.TRIANGLES</td><td>ä¸‰è§’å½¢</td><td>ä¸€ç³»åˆ—å•ç‹¬çš„ä¸‰è§’å½¢ï¼Œç»˜åˆ¶åœ¨ (v0, v1, v2)ã€(v3, v4, v5) â€¦ å¤„ï¼Œå¦‚æœç‚¹çš„ä¸ªæ•°ä¸æ˜¯ 3 çš„æ•´æ•°å€ï¼Œæœ€åå‰©ä¸‹çš„ä¸€æˆ–ä¸¤ä¸ªç‚¹å°†è¢«å¿½ç•¥</td></tr><tr><td>gl.TRIANGLE_STRIP</td><td>ä¸‰è§’å¸¦</td><td>ä¸€ç³»åˆ—æ¡å¸¦çŠ¶çš„ä¸‰è§’å½¢ï¼Œå‰ä¸‰ä¸ªç‚¹æ„æˆäº†ç¬¬ 1 ä¸ªä¸‰è§’å½¢ï¼Œä»ç¬¬ 2 ä¸ªç‚¹å¼€å§‹çš„ä¸‰ä¸ªç‚¹æ„æˆäº†ç¬¬ 2 ä¸ªä¸‰è§’å½¢(è¯¥ä¸‰è§’å½¢ä¸å‰ä¸€ä¸ªä¸‰è§’å½¢å…±äº«ä¸€æ¡è¾¹)ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™äº›ä¸‰è§’å½¢è¢«ç»˜åˆ¶åœ¨ (v0, v1, v2)ã€(v2, v1, v3)(v2, v3, v4) â€¦ å¤„</td></tr><tr><td>gl.TRIANGLE_FAN</td><td>ä¸‰è§’æ‰‡</td><td>ä¸€ç³»åˆ—ä¸‰è§’å½¢ç»„æˆçš„ç±»ä¼¼äºæ‰‡å½¢çš„å›¾å½¢ã€‚å‰ä¸‰ä¸ªç‚¹æ„æˆäº†ç¬¬ 1 ä¸ªä¸‰è§’å½¢ï¼Œæ¥ä¸‹æ¥çš„ä¸€ä¸ªç‚¹å’Œå‰ä¸€ä¸ªä¸‰è§’å½¢çš„æœ€åä¸€æ¡è¾¹ç»„æˆæ¥ä¸‹æ¥çš„ä¸€ä¸ªä¸‰è§’å½¢ã€‚è¿™äº›ä¸‰è§’å½¢è¢«ç»˜åˆ¶åœ¨ (v0, v1, v2)ã€(v0, v2, v3)ã€(v0, v3, v4) â€¦ å¤„</td></tr></tbody></table><h4 id="ç»˜åˆ¶ä¸‰ç»´ä¸–ç•Œä¸­çš„ç‚¹"><a href="#ç»˜åˆ¶ä¸‰ç»´ä¸–ç•Œä¸­çš„ç‚¹" class="headerlink" title="ç»˜åˆ¶ä¸‰ç»´ä¸–ç•Œä¸­çš„ç‚¹"></a>ç»˜åˆ¶ä¸‰ç»´ä¸–ç•Œä¸­çš„ç‚¹</h4><p>æ·»åŠ ä¸€ä¸ª <code>drawPoint()</code> æ–¹æ³•è¿›è¡Œç”»ç‚¹ï¼Œåœ¨è¿è¡Œå‰æˆ‘ä»¬åœ¨ <code>constructor()</code> æ–¹æ³•ä¸­åˆ†åˆ«è°ƒç”¨ <code>this.initShader()</code> å’Œ <code>this.drawPoint()</code> æ–¹æ³•ï¼Œæœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line"></div><div class="line">    ...</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.initShader();</div><div class="line">    <span class="keyword">this</span>.drawPoint();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  ...</div><div class="line"></div><div class="line">  drawPoint() &#123;</div><div class="line">    <span class="keyword">const</span> a_Position = <span class="keyword">this</span>.gl.getAttribLocation(<span class="keyword">this</span>.shaderProgram, <span class="string">'a_Position'</span>);</div><div class="line">    <span class="keyword">this</span>.gl.vertexAttrib4f(a_Position, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</div><div class="line">    <span class="keyword">this</span>.gl.drawArrays(<span class="keyword">this</span>.gl.POINTS, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é¢„è§ˆæ•ˆæœ <a href="https://stackblitz.com/edit/webgl-draw-point" target="_blank" rel="noopener">ç‚¹å‡»è¿è¡Œ</a>ï¼š</p><img src="/2017/webgl-draw-rectangle-and-point/draw-point@2x.png" width="316" height="322"><h3 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h3><p>æœ¬æ–‡ä¸­å‡ºç°äº†ä¸€äº› WebGL çš„ä¸€äº›æ¦‚å¿µï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œä½ ä¸éœ€è¦è®°ä½æœ¬æ–‡ä¸­çš„æ‰€æœ‰ä¸œè¥¿ï¼Œåœ¨åç»­çš„æ•™ç¨‹ä¸­å°†ä¸€æ­¥æ­¥æ·±å…¥ç ”ç©¶è¿™äº›æ¦‚å¿µï¼Œå†åŠ ä¸Šç»å¸¸ç»ƒä¹ æ‰èƒ½çœŸæ­£ç†è§£ï¼Œæ‰€ä»¥ï¼Œç°åœ¨è¿˜ä¸ç”¨å¤ªä¸¥è‚ƒï¼Œç°åœ¨åªéœ€è¦äº«å—é˜…è¯»ï¼Œç­‰ä»¥åå†å›å¤´çœ‹ä¹Ÿä¸è¿Ÿã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Canvas-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#Canvas-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;Canvas ç®€ä»‹&quot;&gt;&lt;/a&gt;Canvas ç®€ä»‹&lt;/h3&gt;&lt;p&gt;åœ¨ HTML5 å‡ºç°ä¹‹å‰ï¼Œå¦‚æœæƒ³è¦åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºå›¾åƒï¼Œåªèƒ½ä½¿ç”¨ HTML æä¾›çš„ &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; æ ‡ç­¾ã€‚ç”¨è¿™ä¸ªæ ‡ç­¾è™½ç„¶ç®€å•ï¼Œä½†æ˜¯åªèƒ½æ˜¾ç¤ºé™æ€çš„å›¾ç‰‡ï¼Œä¸èƒ½è¿›è¡Œå®æ—¶ç»˜åˆ¶å’Œæ¸²æŸ“ï¼Œæ‰€ä»¥åæ¥å‡ºç°äº†ä¸€äº›ç¬¬ä¸‰æ–¹çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ Flash Player ç­‰ã€‚&lt;/p&gt;&lt;p&gt;Canvas ä¸­æ–‡è¯‘ä¸ºâ€œç”»å¸ƒâ€ï¼Œä½œä¸ºç”»å¸ƒæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code&gt;HTMLCanvasElement.getContext(contextType)&lt;/code&gt; è·å– Canvas çš„ä¸Šä¸‹æ–‡ï¼Œç„¶åä½¿ç”¨ä¸Šä¸‹æ–‡æä¾›çš„ API åœ¨ç”»å¸ƒåŒºåŸŸç»˜åˆ¶å›¾æ¡ˆï¼Œæ¥ä¸‹æ¥åˆ†åˆ«ä»‹ç»æ€ä¹ˆä½¿ç”¨äºŒç»´å’Œä¸‰ç»´çš„æ–¹æ³•ç»˜åˆ¶çŸ©å½¢å’Œç‚¹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="front-end" scheme="https://sanonz.github.io/categories/front-end/"/>
    
    
      <category term="JavaScript" scheme="https://sanonz.github.io/tags/JavaScript/"/>
    
      <category term="3D" scheme="https://sanonz.github.io/tags/3D/"/>
    
      <category term="WebGL" scheme="https://sanonz.github.io/tags/WebGL/"/>
    
      <category term="Canvas" scheme="https://sanonz.github.io/tags/Canvas/"/>
    
  </entry>
  
  <entry>
    <title>WebGL ä¸‰ç»´æ•™ç¨‹ - WebGL ä»‹ç»ï¼ˆä¸€ï¼‰</title>
    <link href="https://sanonz.github.io/2017/webgl-introduction/"/>
    <id>https://sanonz.github.io/2017/webgl-introduction/</id>
    <published>2017-10-24T12:25:23.000Z</published>
    <updated>2017-11-13T02:30:11.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="WebGL-æ¦‚è¿°"><a href="#WebGL-æ¦‚è¿°" class="headerlink" title="WebGL æ¦‚è¿°"></a>WebGL æ¦‚è¿°</h3><p>WebGL æ˜¯ä¸€é¡¹åœ¨ç½‘é¡µä¸Šç»˜åˆ¶å’Œæ¸²æŸ“å¤æ‚ä¸‰ç»´å›¾å½¢ï¼ˆ3D å›¾å½¢ï¼‰ï¼Œå¹¶å…è®¸ç”¨æˆ·ä¸ä¹‹è¿›è¡Œäº¤äº’çš„æŠ€æœ¯ï¼Œåœ¨ä¼ ç»Ÿä¸Šåªæœ‰é«˜é…ç½®çš„è®¡ç®—æœºæˆ–ä¸“ç”¨çš„æ¸¸æˆæœºæ‰èƒ½æ¸²æŸ“ä¸‰ç»´å›¾å½¢ï¼Œè€Œç°åœ¨éšç€ä¸ªäººè®¡ç®—æœºä¸æµè§ˆå™¨çš„æ€§èƒ½è¶Šæ¥è¶Šå¼ºï¼Œä½¿ç”¨ä¾¿æ·é€šç”¨çš„ Web æŠ€æœ¯åˆ›å»ºå’Œæ¸²æŸ“ä¸‰ç»´å›¾å½¢å·²ç»æˆä¸ºå¯èƒ½ã€‚HTML5 ä½œä¸ºç›®å‰æœ€æ–°çš„ HTML æ ‡å‡†ï¼Œæ‰©å±•äº†ä¼ ç»Ÿ HTML çš„ç‰¹å¾ï¼Œå¦‚äºŒç»´å›¾å½¢ã€ç½‘ç»œä¼ è¾“ã€æœ¬åœ°æ•°æ®å‚¨å­˜ç­‰ï¼ŒHTML5 æ—¶ä»£çš„åˆ°æ¥ä½¿æµè§ˆå™¨æ­£åœ¨è¿…é€Ÿåœ°ä»ç®€å•çš„å±•ç¤ºå·¥å…·è½¬å˜ä¸ºå¤æ‚çš„åº”ç”¨å¹³å°ï¼Œäººä»¬å¸Œæœ›ç½‘é¡µä¸ä»…ä»…ç”±äºŒç»´å›¾ç»„æˆï¼Œæ‰€ä»¥ WebGLå°±é¡ºç€æ—¶ä»£çš„å¬å”¤åˆ°æ¥äº†ã€‚</p><h3 id="WebGL-çš„èµ·æº"><a href="#WebGL-çš„èµ·æº" class="headerlink" title="WebGL çš„èµ·æº"></a>WebGL çš„èµ·æº</h3><p>åœ¨ä¸ªäººè®¡ç®—æœºä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ä¸¤ç§ä¸‰ç»´å›¾å½¢æ¸²æŸ“æŠ€æœ¯ä½¿ Direct3D å’Œ OpenGLã€‚Direct3D æ˜¯å¾®è½¯DirectX æŠ€æœ¯çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€å¥—ç”±å¾®è½¯æ§åˆ¶çš„ç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ï¼Œä¸»è¦ç”¨åœ¨ Windows å¹³å°ï¼›è€Œ OpenGL ç”±äºå…¶å¼€æ”¾å’Œå…è´¹çš„ç‰¹å¾ï¼Œåœ¨å¤šç§å¹³å°ä¸Šéƒ½æœ‰å¹¿æ³›åœ°ä½¿ç”¨ï¼Œåæ¥ Windows å¯¹ OpenGL ä¹Ÿæä¾›äº†è‰¯å¥½çš„æ”¯æ’‘ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥ä»£æ›¿ Direct3Dã€‚</p><a id="more"></a><p>OpenGL æœ€åˆæ˜¯ç”± SGIï¼ˆSilicon Graphics Incï¼‰å¼€å‘ï¼Œå¹¶åœ¨ 1992 å¹´å‘å¸ƒä¸ºå¼€æºæ ‡å‡†ã€‚å¤šå¹´ä»¥æ¥ï¼ŒOpenGL å‘å±•äº†æ•°ä¸ªç‰ˆæœ¬ï¼Œå¹¶å¯¹ä¸‰ç»´å›¾å½¢å¼€å‘ã€è½¯ä»¶äº§å“å¼€å‘ã€ç”šè‡³ç”µå½±åˆ¶ä½œäº§ç”Ÿäº†æ·±è¿œçš„å½±å“ã€‚è™½ç„¶ WebGL æ ¹æ¤äº OpenGLï¼Œä½†å®ƒå®é™…ä¸Šæ˜¯ä» OpenGL çš„ä¸€ä¸ªç‰¹æ®Šç‰ˆæœ¬ OpenGL ES æ´¾ç”Ÿå‡ºæ¥çš„ï¼ŒOpenGL ES ä¸»è¦ä¸“ç”¨äºåµŒå…¥å¼è®¡ç®—æœºã€æ™ºèƒ½æ‰‹æœºã€å®¶ç”¨ç”¨æ´—ç­‰è®¾å¤‡ã€‚OpenGL ES äº 2003ï½2004 å¹´è¢«é¦–æ¬¡æå‡ºï¼Œå¹¶åœ¨ 2007 å¹´ï¼ˆES 2.0ï¼‰è¿›è¡Œäº†ä¸¤æ¬¡å‡çº§ï¼ŒWebGL æ˜¯åŸºäº OpenGL ES 2.0 çš„ã€‚è¿™å‡ å¹´é‡‡ç”¨ OpenGL ES æŠ€æœ¯çš„ç”µå­è®¾å¤‡çš„æ•°é‡å¤§å¹…åº¦å¢é•¿ï¼Œå°¤å…¶æ˜¯ç§»åŠ¨ç«¯è®¾å¤‡ã€‚OpenGL ES æˆåŠŸè¢«è¿™äº›è®¾å¤‡é‡‡ç”¨çš„éƒ¨åˆ†åŸå› æ˜¯ï¼Œå®ƒåœ¨æ·»åŠ æ–°ç‰¹æ€§çš„åŒæ—¶ä» OpenGL ä¸­ç§»é™¤äº†è®¸å¤šé™ˆæ—§çš„æ—§ç‰¹æ€§ï¼Œè¿™ä½¿å®ƒåœ¨ä¿æŒè½»é‡çº§çš„åŒæ—¶ï¼Œä»å…·æœ‰è¶³å¤Ÿçš„èƒ½åŠ›æ¥æ¸²æŸ“å‡ºç²¾ç¾çš„ä¸‰ç»´å›¾å½¢ã€‚</p><h3 id="WebGL-çš„ä¼˜åŠ¿"><a href="#WebGL-çš„ä¼˜åŠ¿" class="headerlink" title="WebGL çš„ä¼˜åŠ¿"></a>WebGL çš„ä¼˜åŠ¿</h3><p>è¿™äº›å¹´éšç€ HTML çš„å‘å±•ï¼Œç½‘é¡µç”±æœ€åˆç®€å•çš„é™æ€é¡µé¢å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œä»å¼•å…¥ JavaScript ç­‰è„šæœ¬è¯­è¨€ï¼ŒHTML å¼€å§‹æä¾›ä¸€äº›åŠ¨æ€çš„å†…å®¹ï¼Œå¹¶å…·æœ‰ä¸€å®šçš„äº¤äº’æ€§ã€‚ç°åœ¨å‡ºç°äº†æ›´å¼ºå¤§çš„ HTML5ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ canvas æˆ– svg æ ‡ç­¾åœ¨ç½‘é¡µä¸Šç»˜åˆ¶äºŒç»´å›¾å½¢ï¼Œä»¥å‘ˆç°æ›´ä¸°å¯Œçš„å†…å®¹å¦‚ï¼šåœ¨çº¿çš„åœ¨çº¿ä½œå›¾ <a href="https://processon.com/" target="_blank" rel="noopener">ProcessOn</a>ã€åŸå‹è®¾è®¡ <a href="https://modao.cc/" target="_blank" rel="noopener">å¢¨åˆ€</a> ä»¥åŠæä¾›ä¸€æ•´å¥—çš„åœ¨çº¿åŠå…¬è½¯ä»¶çš„ <a href="https://www.zoho.com/" target="_blank" rel="noopener">Zohu</a> ç­‰å·¥å…·ã€‚</p><p>WebGL åˆ™èµ°çš„æ›´è¿œï¼Œå®ƒå…è®¸ JavaScript åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºå’Œæ“ä½œä¸‰ç»´å›¾å½¢ã€‚æœ‰äº† WebGL æŠ€æœ¯ï¼Œå¼€å‘ä¸‰ç»´çš„å®¢æˆ·ç«¯ç•Œé¢ã€è¿è¡Œä¸‰ç»´çš„ç½‘é¡µæ¸¸æˆï¼Œå¯¹äº’è”ç½‘ä¸Šçš„æµ·é‡æ•°æ®è¿›è¡Œä¸‰ç»´å¯è§†åŒ–éƒ½æˆäº†å¯èƒ½ï¼Œæ— éœ€è€ƒè™‘å¹³å°é—®é¢˜ã€æ— éœ€ç¹ççš„å®‰è£…è¿‡ç¨‹ã€æ— éœ€ç»å ‚å¤‡ä»½è‡ªå·±çš„æ–‡ä»¶åˆ°äº‘ç«¯æ¥å®ç°å…±äº«ã€‚è™½ç„¶ WebGL å¼ºå¤§åˆ°ä»¤äººæƒŠå¹ï¼Œä½†ä½¿ç”¨è¿™é¡¹æŠ€æœ¯è¿›è¡Œå¼€å‘å´å¼‚å¸¸ç®€å•ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¢ç´¢å§ã€‚</p><h3 id="WebGL-ç¨‹åºç»“æ„"><a href="#WebGL-ç¨‹åºç»“æ„" class="headerlink" title="WebGL ç¨‹åºç»“æ„"></a>WebGL ç¨‹åºç»“æ„</h3><p>åœ¨å†™ WebGL é¡µé¢æ—¶éœ€è¦ä¸‰ç§è¯­è¨€ï¼šHTML5ï¼ï¼ˆCSSï¼‰ã€JavaScriptå’Œ GLSL ESï¼ˆç€è‰²å™¨è¯­è¨€ï¼‰ï¼Œå› ä¸ºé€šå¸¸ GLSL ES æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼åœ¨ JavaScript ä¸­ç¼–å†™çš„ï¼Œå®é™…ä¸Šåœ¨å†™ WebGL é¡µé¢æ—¶ç»“æ„è¿˜æ˜¯å’Œå¹³å¸¸ä¸€æ ·ã€‚æ‰€ä»¥ï¼Œè™½ç„¶ WebGL é¡µé¢æ›´åŠ å¤æ‚äº†ä¸€äº›ï¼Œä½†æ˜¯ä»ç„¶ä¿æŒç€å’Œä¼ ç»Ÿé¡µé¢ä¸€æ ·çš„é£æ ¼ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;WebGL-æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#WebGL-æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;WebGL æ¦‚è¿°&quot;&gt;&lt;/a&gt;WebGL æ¦‚è¿°&lt;/h3&gt;&lt;p&gt;WebGL æ˜¯ä¸€é¡¹åœ¨ç½‘é¡µä¸Šç»˜åˆ¶å’Œæ¸²æŸ“å¤æ‚ä¸‰ç»´å›¾å½¢ï¼ˆ3D å›¾å½¢ï¼‰ï¼Œå¹¶å…è®¸ç”¨æˆ·ä¸ä¹‹è¿›è¡Œäº¤äº’çš„æŠ€æœ¯ï¼Œåœ¨ä¼ ç»Ÿä¸Šåªæœ‰é«˜é…ç½®çš„è®¡ç®—æœºæˆ–ä¸“ç”¨çš„æ¸¸æˆæœºæ‰èƒ½æ¸²æŸ“ä¸‰ç»´å›¾å½¢ï¼Œè€Œç°åœ¨éšç€ä¸ªäººè®¡ç®—æœºä¸æµè§ˆå™¨çš„æ€§èƒ½è¶Šæ¥è¶Šå¼ºï¼Œä½¿ç”¨ä¾¿æ·é€šç”¨çš„ Web æŠ€æœ¯åˆ›å»ºå’Œæ¸²æŸ“ä¸‰ç»´å›¾å½¢å·²ç»æˆä¸ºå¯èƒ½ã€‚HTML5 ä½œä¸ºç›®å‰æœ€æ–°çš„ HTML æ ‡å‡†ï¼Œæ‰©å±•äº†ä¼ ç»Ÿ HTML çš„ç‰¹å¾ï¼Œå¦‚äºŒç»´å›¾å½¢ã€ç½‘ç»œä¼ è¾“ã€æœ¬åœ°æ•°æ®å‚¨å­˜ç­‰ï¼ŒHTML5 æ—¶ä»£çš„åˆ°æ¥ä½¿æµè§ˆå™¨æ­£åœ¨è¿…é€Ÿåœ°ä»ç®€å•çš„å±•ç¤ºå·¥å…·è½¬å˜ä¸ºå¤æ‚çš„åº”ç”¨å¹³å°ï¼Œäººä»¬å¸Œæœ›ç½‘é¡µä¸ä»…ä»…ç”±äºŒç»´å›¾ç»„æˆï¼Œæ‰€ä»¥ WebGLå°±é¡ºç€æ—¶ä»£çš„å¬å”¤åˆ°æ¥äº†ã€‚&lt;/p&gt;&lt;h3 id=&quot;WebGL-çš„èµ·æº&quot;&gt;&lt;a href=&quot;#WebGL-çš„èµ·æº&quot; class=&quot;headerlink&quot; title=&quot;WebGL çš„èµ·æº&quot;&gt;&lt;/a&gt;WebGL çš„èµ·æº&lt;/h3&gt;&lt;p&gt;åœ¨ä¸ªäººè®¡ç®—æœºä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ä¸¤ç§ä¸‰ç»´å›¾å½¢æ¸²æŸ“æŠ€æœ¯ä½¿ Direct3D å’Œ OpenGLã€‚Direct3D æ˜¯å¾®è½¯DirectX æŠ€æœ¯çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€å¥—ç”±å¾®è½¯æ§åˆ¶çš„ç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ï¼Œä¸»è¦ç”¨åœ¨ Windows å¹³å°ï¼›è€Œ OpenGL ç”±äºå…¶å¼€æ”¾å’Œå…è´¹çš„ç‰¹å¾ï¼Œåœ¨å¤šç§å¹³å°ä¸Šéƒ½æœ‰å¹¿æ³›åœ°ä½¿ç”¨ï¼Œåæ¥ Windows å¯¹ OpenGL ä¹Ÿæä¾›äº†è‰¯å¥½çš„æ”¯æ’‘ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥ä»£æ›¿ Direct3Dã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="front-end" scheme="https://sanonz.github.io/categories/front-end/"/>
    
    
      <category term="JavaScript" scheme="https://sanonz.github.io/tags/JavaScript/"/>
    
      <category term="3D" scheme="https://sanonz.github.io/tags/3D/"/>
    
      <category term="WebGL" scheme="https://sanonz.github.io/tags/WebGL/"/>
    
      <category term="Canvas" scheme="https://sanonz.github.io/tags/Canvas/"/>
    
  </entry>
  
  <entry>
    <title>Hexo æ­å»ºé™æ€åšå®¢ä¸ hexo-theme-concise ä¸»é¢˜ä½¿ç”¨æ•™ç¨‹</title>
    <link href="https://sanonz.github.io/2017/hello-world/"/>
    <id>https://sanonz.github.io/2017/hello-world/</id>
    <published>2017-10-20T15:01:31.000Z</published>
    <updated>2017-11-28T01:44:25.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-Hexoï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Hexoï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Hexoï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Hexoï¼Ÿ</h3><p>Hexo æ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µï¼Œä½ å¯ä»¥æŠŠç”Ÿæˆçš„é™æ€ç½‘é¡µä¸Šä¼ åˆ° Web æœåŠ¡å™¨ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬é€‰ç”¨çš„æ˜¯ GitHub åš Web æœåŠ¡å™¨ï¼Œä½ æ²¡çœ‹é”™ï¼Œå…¨çƒæœ€å¤§çš„åŒæ€§æ‹äº¤å‹ç½‘ç«™ï¼ˆğŸ™ˆé€ƒâ€¦â€¦ï¼‰ï¼Œç„¶åå°±å¯ä»¥è®¿é—®åˆ°åšå®¢ç«™ç‚¹ï¼Œå› ä¸ºæ¯ä¸ªé¡µé¢éƒ½æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥è®¿é—®é€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼Œç”¨æˆ·ä½“éªŒéå¸¸å¥½ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-Markdown"><a href="#ä»€ä¹ˆæ˜¯-Markdown" class="headerlink" title="ä»€ä¹ˆæ˜¯ Markdown"></a>ä»€ä¹ˆæ˜¯ Markdown</h3><p><a href="http://wowubuntu.com/markdown/" target="_blank" rel="noopener">Markdown</a> æ˜¯ä¸€ç§ç”¨æ¥å†™ä½œçš„è½»é‡çº§ã€Œæ ‡è®°è¯­è¨€ã€ï¼Œåç¼€æ ¼å¼é€šå¸¸ä¸ºï¼š.md æˆ– .markdownï¼Œç”¨ç®€æ´çš„è¯­æ³•æ¥æè¿°æ’ç‰ˆæ ¼å¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´ä¸“å¿ƒçš„å†™ä½œï¼Œå› ä¸º Markdown æ˜¯çº¯æ–‡æœ¬æ ¼å¼ï¼Œæ‰€ä»¥å¯ä»¥å®ç°è·¨å¹³å°ï¼Œä¸ç®¡ä½ åˆ‡æ¢åˆ°ä»€ä¹ˆè®¾å¤‡éƒ½å¯ä»¥æŸ¥é˜…åŠå†™ä½œï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾çš„è½¬æ¢ä¸ºHTMLã€PDFã€ç”µå­ä¹¦ç­‰ã€‚ç›®å‰å¸‚åœºä¸Šè¿˜æœ‰å¤§é‡åœ¨çº¿ç¼–è¾‘å™¨ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆï¼Œè®©ä½ å……åˆ†äº«å— Markdown å¸¦æ¥çš„æ„‰æ‚¦æ„Ÿã€‚</p><a id="more"></a><h3 id="å®‰è£…å‰æ"><a href="#å®‰è£…å‰æ" class="headerlink" title="å®‰è£…å‰æ"></a>å®‰è£…å‰æ</h3><p>å®‰è£… Hexo ç›¸å½“ç®€å•ã€‚ç„¶è€Œåœ¨å®‰è£…å‰ï¼Œæ‚¨å¿…é¡»æ£€æŸ¥ç”µè„‘ä¸­æ˜¯å¦å·²å®‰è£…ä¸‹åˆ—åº”ç”¨ç¨‹åºï¼š</p><ul><li><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a></li><li><a href="http://nodejs.org/" target="_blank" rel="noopener">Nodejs</a></li></ul><h3 id="å®‰è£…ä¸ä½¿ç”¨"><a href="#å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="å®‰è£…ä¸ä½¿ç”¨"></a>å®‰è£…ä¸ä½¿ç”¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> # è®¾ç½® npm ä¸ºå›½å†…é•œåƒæå‡å®‰è£…é€Ÿåº¦ï¼Œå¦‚æœä½ å·²ç»è®¾ç½®è¿‡äº†è¯·å¿½ç•¥</div><div class="line"><span class="meta">$</span> npm config set registry https://registry.taobao.org/</div><div class="line"><span class="meta">$</span></div><div class="line"><span class="meta">$</span> # å®‰è£… Hexo</div><div class="line"><span class="meta">$</span> npm install -g hexo-cli</div></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ–°å»ºä¸€ä¸ªç«™ç‚¹<br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> # æ–°å»ºç«™ç‚¹</div><div class="line"><span class="meta">$</span> hexo init blog-markdown</div><div class="line"><span class="meta">$</span></div><div class="line"><span class="meta">$</span> # åˆ‡æ¢åˆ°ç«™ç‚¹ä¸‹</div><div class="line"><span class="meta">$</span> cd blog-markdown</div><div class="line"><span class="meta">$</span></div><div class="line"><span class="meta">$</span> # æ·»åŠ ä¸€ç¯‡æ–‡ç« </div><div class="line"><span class="meta">$</span> hexo new welcome</div></pre></td></tr></table></figure><p></p><p>æ–‡ç« é»˜è®¤ä¼šè¢«æ·»åŠ åˆ° ./source/_posts ç›®å½•ä¸‹ï¼Œè¿›å…¥åˆ°æ­¤ç›®å½•ç„¶åä½¿ç”¨å¿ƒæ„çš„ç¼–è¾‘å™¨æ‰“å¼€ welcome.md æ–‡ä»¶<br></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: welcome</div><div class="line">date: 2017-10-20 23:01:31</div><div class="line">tags:</div><div class="line">---</div></pre></td></tr></table></figure><p></p><!-- more --><p>ç¼–è¾‘ä¸º<br></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: æˆ‘å‘å¸ƒçš„ç¬¬ä¸€ç¯‡æ–‡ç« </div><div class="line">date: 2017-10-20 23:01:31</div><div class="line">tags:</div><div class="line"><span class="bullet">- </span>ç”Ÿæ´»</div><div class="line"><span class="bullet">- </span>è¯—å’Œè¿œæ–¹</div><div class="line">---</div><div class="line"></div><div class="line"></div><div class="line">äººç”Ÿä¸åªçœ¼å‰çš„è‹Ÿä¸”ï¼Œè¿˜æœ‰è¯—å’Œè¿œæ–¹ã€‚</div></pre></td></tr></table></figure><p></p><p>ç”Ÿæˆé™æ€æ–‡ä»¶<br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> # å¯ä»¥ä½¿ç”¨ç®€å†™æ–¹å¼ï¼šhexo g</div><div class="line"><span class="meta">$</span> hexo generate</div></pre></td></tr></table></figure><p></p><p>æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š<a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> è¿›è¡Œé¢„è§ˆ<br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> # ç®€å†™ï¼šhexo s</div><div class="line"><span class="meta">$</span> hexo server</div><div class="line">INFO  Start processing</div><div class="line">INFO  Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</div></pre></td></tr></table></figure><p></p><h3 id="ç™»é™†åˆ°-GitHub"><a href="#ç™»é™†åˆ°-GitHub" class="headerlink" title="ç™»é™†åˆ° GitHub"></a>ç™»é™†åˆ° GitHub</h3><p>ç™»é™†åœ°å€ï¼š<a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a>ï¼Œæ²¡æœ‰è´¦å·æ³¨å†Œä¸€ä¸ªï¼Œç™»é™†æˆåŠŸä¹‹åç‚¹å‡»é¡¶éƒ¨å¯¼èˆªæ¡çš„â•å·ï¼Œå¹¶é€‰æ‹© <a href="https://github.com/new" target="_blank" rel="noopener"><code>New repository</code></a>ï¼Œå¦‚ä¸‹å›¾</p><img src="/2017/hello-world/github-create@2x.png"><p>å¡«å†™ Repository name ä¸€é¡¹ï¼Œæ¯”å¦‚å¡«å†™ <code>sanonz</code> ç„¶åå°±å¯ä»¥é€šè¿‡ï¼š<a href="https://sanonz.github.io">https://sanonz.github.io</a> æ¥è®¿é—®ï¼ˆè®¿é—®ä¹‹å‰æ ¹ç›®å½•è¦æœ‰é»˜è®¤çš„ index.html æ‰èƒ½æ­£å¸¸æ‰“å¼€ï¼‰ï¼Œå¡«å†™å®Œæˆåç‚¹å‡» Create repository æŒ‰é’®æäº¤åˆ›å»ºï¼Œå¦‚ä¸‹å›¾</p><img src="/2017/hello-world/github-create-repository@2x.png"><p>æäº¤æˆåŠŸåå¤åˆ¶çº¢è‰²æ¡†ä½çš„ä»“åº“åœ°å€</p><img src="/2017/hello-world/github-created@2x.png"><h3 id="éƒ¨ç½²åˆ°-GitHub"><a href="#éƒ¨ç½²åˆ°-GitHub" class="headerlink" title="éƒ¨ç½²åˆ° GitHub"></a>éƒ¨ç½²åˆ° GitHub</h3><p>ä¿®æ”¹ _config.yml ä¸­çš„å‚æ•°<br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">deploy:</span></div><div class="line"><span class="attr">  type:</span> <span class="string">git</span></div></pre></td></tr></table></figure><p></p><p>å®‰è£… <a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="noopener">hexo-deployer-git</a><br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git</div></pre></td></tr></table></figure><p></p><p>ä¿®æ”¹ _config.yml é…ç½®ï¼ŒæŠŠåˆšåˆšå¤åˆ¶çš„ä»“åº“åœ°å€ç²˜è´´åˆ° repo: åè¾¹<br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attr">deploy:</span></div><div class="line"><span class="attr">  type:</span> <span class="string">git</span></div><div class="line"><span class="attr">  repo:</span> <span class="attr">https://github.com/Sanonz/your-blog.github.io.git</span></div><div class="line"><span class="attr">  branch:</span> <span class="string">master</span></div><div class="line">  <span class="comment"># message: [message]</span></div></pre></td></tr></table></figure><p></p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>repo</td><td>åº“ï¼ˆRepositoryï¼‰åœ°å€</td></tr><tr><td>branch</td><td>åˆ†æ”¯åç§°ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ GitHub æˆ– GitCafe çš„è¯ï¼Œç¨‹åºä¼šå°è¯•è‡ªåŠ¨æ£€æµ‹ã€‚</td></tr><tr><td>message</td><td>è‡ªå®šä¹‰æäº¤ä¿¡æ¯ (é»˜è®¤ä¸º Site updated: {{ now('YYYY-MM-DD HH:mm:ss') }} )</td></tr></tbody></table><p>Hexo ä¸€é”®éƒ¨ç½²åˆ° GitHub<br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> hexo deploy</div></pre></td></tr></table></figure><p></p><p>éƒ¨ç½²æˆåŠŸåæŸ¥çœ‹ç«™ç‚¹ï¼š<a href="https://your-blog.github.io" target="_blank" rel="noopener">https://your-blog.github.io</a></p><h3 id="ä½¿ç”¨-hexo-theme-concise-ä¸»é¢˜"><a href="#ä½¿ç”¨-hexo-theme-concise-ä¸»é¢˜" class="headerlink" title="ä½¿ç”¨ hexo-theme-concise ä¸»é¢˜"></a>ä½¿ç”¨ hexo-theme-concise ä¸»é¢˜</h3><p><a href="https://github.com/Sanonz/hexo-theme-concise" target="_blank" rel="noopener">Concise</a> ä¸»é¢˜ä¸ºåšä¸»å¼€å‘çš„ç®€çº¦ä¸»é¢˜ï¼Œä¹Ÿå°±æ˜¯æœ¬ç«™æ‰€ç”¨çš„ä¸»é¢˜ï¼Œå¦‚æœæ‚¨å–œæ¬¢çš„è¯å¯ä»¥æŒ‰ä»¥ä¸‹æ•™ç¨‹åˆ‡æ¢ä¸ºæœ¬ç«™æ‰€ä½¿ç”¨çš„ä¸»é¢˜<br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git clone https://github.com/Sanonz/hexo-theme-concise themes/concise</div></pre></td></tr></table></figure><p></p><p>ä¿®æ”¹ _config.yml é…ç½®<br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">theme:</span> <span class="string">concise</span></div></pre></td></tr></table></figure><p></p><p>å› ä¸ºè¿™ä¸ªä¸»é¢˜ä½¿ç”¨äº† less ç¼–è¯‘ï¼ŒHexo é»˜è®¤çš„ç¼–è¯‘å™¨ä¸º <a href="https://github.com/hexojs/hexo-renderer-stylus" target="_blank" rel="noopener">hexo-renderer-stylus</a> è¦åˆ‡æ¢ä¸º <a href="https://github.com/hexojs/hexo-renderer-less" target="_blank" rel="noopener">hexo-renderer-less</a><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install hexo-renderer-less --save</div></pre></td></tr></table></figure><p></p><p>å¦‚æœä½ ä¸éœ€è¦ <code>hexo-renderer-stylus</code> å¯ä»¥æŠŠå®ƒå¸è½½æ‰<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm uninstall hexo-renderer-stylus --save</div></pre></td></tr></table></figure><p></p><p>æ¸…é™¤ç¼“å­˜æ•°æ®<br></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo clean</span></div><div class="line"><span class="meta">$</span><span class="bash"> hexo server</span></div></pre></td></tr></table></figure><p></p><p>åˆ·æ–°é¡µé¢æŸ¥çœ‹æ–°ä¸»é¢˜æ•ˆæœï¼ŒConcise ä¸»é¢˜çš„å…·ä½“é…ç½®åˆ° <a href="https://github.com/Sanonz/hexo-theme-concise/blob/master/README.md" target="_blank" rel="noopener">è¿™é‡ŒæŸ¥çœ‹</a>ï¼Œå¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹é‡åˆ°é—®é¢˜æ¬¢è¿æ <a href="https://github.com/Sanonz/hexo-theme-concise/issues" target="_blank" rel="noopener">Issues</a>ï¼Œæœ€åå¦‚æœå–œæ¬¢çš„è¯ç»™ä¸ª Star ğŸ˜</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä»€ä¹ˆæ˜¯-Hexoï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-Hexoï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ Hexoï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ Hexoï¼Ÿ&lt;/h3&gt;&lt;p&gt;Hexo æ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µï¼Œä½ å¯ä»¥æŠŠç”Ÿæˆçš„é™æ€ç½‘é¡µä¸Šä¼ åˆ° Web æœåŠ¡å™¨ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬é€‰ç”¨çš„æ˜¯ GitHub åš Web æœåŠ¡å™¨ï¼Œä½ æ²¡çœ‹é”™ï¼Œå…¨çƒæœ€å¤§çš„åŒæ€§æ‹äº¤å‹ç½‘ç«™ï¼ˆğŸ™ˆé€ƒâ€¦â€¦ï¼‰ï¼Œç„¶åå°±å¯ä»¥è®¿é—®åˆ°åšå®¢ç«™ç‚¹ï¼Œå› ä¸ºæ¯ä¸ªé¡µé¢éƒ½æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥è®¿é—®é€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼Œç”¨æˆ·ä½“éªŒéå¸¸å¥½ã€‚&lt;/p&gt;&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯-Markdown&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-Markdown&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ Markdown&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ Markdown&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://wowubuntu.com/markdown/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Markdown&lt;/a&gt; æ˜¯ä¸€ç§ç”¨æ¥å†™ä½œçš„è½»é‡çº§ã€Œæ ‡è®°è¯­è¨€ã€ï¼Œåç¼€æ ¼å¼é€šå¸¸ä¸ºï¼š.md æˆ– .markdownï¼Œç”¨ç®€æ´çš„è¯­æ³•æ¥æè¿°æ’ç‰ˆæ ¼å¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´ä¸“å¿ƒçš„å†™ä½œï¼Œå› ä¸º Markdown æ˜¯çº¯æ–‡æœ¬æ ¼å¼ï¼Œæ‰€ä»¥å¯ä»¥å®ç°è·¨å¹³å°ï¼Œä¸ç®¡ä½ åˆ‡æ¢åˆ°ä»€ä¹ˆè®¾å¤‡éƒ½å¯ä»¥æŸ¥é˜…åŠå†™ä½œï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾çš„è½¬æ¢ä¸ºHTMLã€PDFã€ç”µå­ä¹¦ç­‰ã€‚ç›®å‰å¸‚åœºä¸Šè¿˜æœ‰å¤§é‡åœ¨çº¿ç¼–è¾‘å™¨ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆï¼Œè®©ä½ å……åˆ†äº«å— Markdown å¸¦æ¥çš„æ„‰æ‚¦æ„Ÿã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="front-end" scheme="https://sanonz.github.io/categories/front-end/"/>
    
    
      <category term="Hexo" scheme="https://sanonz.github.io/tags/Hexo/"/>
    
      <category term="Nodejs" scheme="https://sanonz.github.io/tags/Nodejs/"/>
    
      <category term="JavaScript" scheme="https://sanonz.github.io/tags/JavaScript/"/>
    
  </entry>
  
</feed>
